"use strict";(self["webpackChunkel_admin_v2"]=self["webpackChunkel_admin_v2"]||[]).push([[53],{5053:function(t,e,a){a.r(e),a.d(e,{default:function(){return d}});var s=function(){var t=this,e=t._self._c;return e("el-dialog",{attrs:{title:t.dataForm.id?"编辑":"新增",visible:t.visible},on:{"update:visible":function(e){t.visible=e}}},[e("el-form",{ref:"dataForm",attrs:{model:t.dataForm,rules:t.dataRule,"label-width":"150px"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.dataFormSubmit()}}},[e("el-row",[e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:t.$t("name"),prop:"groupName"}},[e("el-input",{attrs:{maxlength:25},model:{value:t.dataForm.groupName,callback:function(e){t.$set(t.dataForm,"groupName",e)},expression:"dataForm.groupName"}})],1)],1),e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:t.$t("term.info.remark"),prop:"memo"}},[e("el-input",{attrs:{maxlength:25},model:{value:t.dataForm.memo,callback:function(e){t.$set(t.dataForm,"memo",e)},expression:"dataForm.memo"}})],1)],1)],1),e("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.tableDatas,"tooltip-effect":"dark"},on:{"selection-change":t.handleSelectionChange}},[e("el-table-column",{attrs:{type:"selection",width:"55"}}),e("el-table-column",{attrs:{prop:"termId",label:t.$t("term.info.termId")}}),e("el-table-column",{attrs:{prop:"dbcpName",label:t.$t("term.info.deptName")}}),e("el-table-column",{attrs:{prop:"typeId",label:t.$t("term.model.typeId")}}),e("el-table-column",{attrs:{prop:"modelId",label:t.$t("term.info.modelId")}}),e("el-table-column",{attrs:{prop:"brandId",label:t.$t("term.info.brandId")}})],1)],1),e("div",{attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.visible=!1}}},[t._v("取消")]),e("el-button",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:t.fullscreenLoading,expression:"fullscreenLoading",modifiers:{fullscreen:!0,lock:!0}}],attrs:{type:"primary"},on:{click:function(e){return t.dataFormSubmit()}}},[t._v("确定")])],1)],1)},i=[],l={components:{},mixins:[],props:{tableData:{type:Array,default:()=>[]},flag:{type:Number}},data(){return{visible:!1,fullscreenLoading:!1,clickStatu:!1,isCashSelect:[],typeIdList:[],terminalBrandList:[],statusList:[],modelIdList:[],layoutTypeList:[],installTypeList:[],disabled:!1,deptList:[],cityAreaList:[],defaultProps:{children:"children",label:"name"},dataForm:{groupName:"",memo:"",termId:"",typeId:"",terminalBrand:"",webName:"",status:"",modelId:"",layoutType:"",dbcpName:"",installType:""},dataRule:{groupName:[{required:!0,message:this.$t("termGroup.name")+this.$t("info.common.notNull "),trigger:"blur"}]},tableDatas:[],multipleSelection:[]}},computed:{},created(){},mounted(){this.isCashSelect=this.$store.getters["getDictList"]("dept.status"),this.typeIdList=this.$store.getters["getDictList"]("dept.status"),this.terminalBrandList=this.$store.getters["getDictList"]("dept.status"),this.statusList=this.$store.getters["getDictList"]("dept.status"),this.modelIdList=this.$store.getters["getDictList"]("dept.status"),this.layoutTypeList=this.$store.getters["getDictList"]("dept.status"),this.installTypeList=this.$store.getters["getDictList"]("dept.status"),this.$nextTick((()=>{this.tableData.forEach((t=>{this.multipleSelection.indexOf(t.id)>=0&&this.$refs.multipleTable.toggleRowSelection(t,!0)}))}))},methods:{handleSelectionChange(t){this.multipleSelection=t},getDeptList(){let t={};t={language:"zh"===this.$store.state.i18n.locale?"zh_CN":"en_us"},this.$http({url:"/service/dept/getDepts",method:"post",data:t,contentType:"json"}).then((t=>{0===t.code?this.deptList=t.data:this.$message(this.$t(t.msg))}))},handleNodeClick(t){this.dataForm.parentId=t.id,this.dataForm.deptLevel=t.deptLevel+1,this.dataForm.dbcpName=t.name},init(t,e){this.getDeptList(),this.visible=!0,this.$nextTick((()=>{this.$refs.dataForm.resetFields(),0!==this.flag&&1!==this.flag||(this.dataForm.flag=this.flag),t&&(this.dataForm=t||"","copy"===e&&(this.dataForm.id=""))}))},dataFormSelect(){console.log(this.dataForm),this.$http({url:"/list/3",method:"post",data:this.dataForm,contentType:"json"}).then((t=>{t&&0===t.code&&t.data.result.forEach((t=>{this.tableDatas.push(t.filter)}))}))},dataFormSubmit(){this.clickStatu||(this.clickStatu=!0,this.$refs["dataForm"].validate((t=>{t&&(this.fullscreenLoading=!0,this.$http({url:"/save",method:"post",data:this.dataForm,contentType:"json"}).then((t=>{t&&0===t.code?(this.visible=!1,this.$emit("refreshDataList"),this.$message({message:this.$t("operateSuccess"),type:"success",duration:1500,onClose:()=>{this.clickStatu=!1,this.fullscreenLoading=!1}})):this.$message({message:this.$t(t.msg),type:"error",duration:1500,onClose:()=>{this.clickStatu=!1,this.fullscreenLoading=!1}})})))}))),setTimeout((()=>{this.clickStatu=!1,this.fullscreenLoading=!1}),1500)}},filters:{},watch:{}},o=l,r=a(3736),n=(0,r.Z)(o,s,i,!1,null,"2cf10923",null),d=n.exports}}]);
//# sourceMappingURL=53.68a8e0b2.js.map