"use strict";(self["webpackChunkel_admin_v2"]=self["webpackChunkel_admin_v2"]||[]).push([[975],{5970:function(e,t,a){a.d(t,{Z:function(){return m}});var s,o,l={methods:{refreshUserData(e){this.$http.get("/service/loginData/refreshUserData",{params:{language:"zh"===this.$store.state.i18n.locale?"zh_CN":"en_us",refreshDataType:e}}).then((t=>{if(0===t.code){let a=[];switch(e){case"events":break;case"datas":this.$store.commit("common/updateDictList",t.data);break;case"privileges":this.$store.commit("common/updatePermissions",t.data);break;case"menus":this.$router.options.hasAddDynamicMenuRoutes=!1,console.log(this.$router.options.hasAddDynamicMenuRoutes),this.$store.commit("common/updateAllMenuList",t.data),a=this.$store.getters["common/menuRoutersList"].map((e=>{const t=e.urlVue.startsWith("/")?e.urlVue:`/${e.urlVue}`;return{path:t,meta:{nameEnUs:e.nameEnUs,nameLocal:e.nameLocal},component:null}})),this.$store.commit("common/updateBusiRouters",[...a]);break;case"languages":this.$i18n.mergeLocaleMessage("zh",t.data.languages);break}}}))}},filters:{},watch:{}},i=l,n=a(3736),r=(0,n.Z)(i,s,o,!1,null,null,null),m=r.exports},4975:function(e,t,a){a.r(t),a.d(t,{default:function(){return u}});var s=function(){var e=this,t=e._self._c;return t("el-dialog",{attrs:{title:e.dataForm.id?"编辑":"新增",visible:e.visible},on:{"update:visible":function(t){e.visible=t},close:e.resetDataForm}},[t("el-form",{ref:"dataForm",attrs:{model:e.dataForm,rules:e.dataRule,"label-width":"150px"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.dataFormSubmit()}}},[t("el-form-item",{attrs:{label:e.$t("编号"),prop:"code"}},[t("el-input",{attrs:{maxlength:25},model:{value:e.dataForm.code,callback:function(t){e.$set(e.dataForm,"code",t)},expression:"dataForm.code"}})],1),t("el-form-item",{attrs:{label:e.$t("中文"),prop:"nameEnUs"}},[t("el-input",{attrs:{maxlength:25},model:{value:e.dataForm.nameEnUs,callback:function(t){e.$set(e.dataForm,"nameEnUs",t)},expression:"dataForm.nameEnUs"}})],1),t("el-form-item",{attrs:{label:e.$t("英文"),prop:"nameLocal"}},[t("el-input",{attrs:{maxlength:25},model:{value:e.dataForm.nameLocal,callback:function(t){e.$set(e.dataForm,"nameLocal",t)},expression:"dataForm.nameLocal"}})],1),t("el-form-item",{attrs:{label:e.$t("数据值"),prop:"value"}},[t("el-input",{attrs:{maxlength:25},model:{value:e.dataForm.value,callback:function(t){e.$set(e.dataForm,"value",t)},expression:"dataForm.value"}})],1),t("el-form-item",{attrs:{label:e.$t("备注"),prop:"memo"}},[t("el-input",{attrs:{maxlength:25},model:{value:e.dataForm.memo,callback:function(t){e.$set(e.dataForm,"memo",t)},expression:"dataForm.memo"}})],1),t("el-form-item",{attrs:{label:e.$t("状态"),prop:"flag"}},[t("el-select",{attrs:{size:"mini"},model:{value:e.dataForm.flag,callback:function(t){e.$set(e.dataForm,"flag",t)},expression:"dataForm.flag"}},e._l(e.statusList,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1),t("div",{attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.visible=!1}}},[e._v("取消")]),t("el-button",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:e.fullscreenLoading,expression:"fullscreenLoading",modifiers:{fullscreen:!0,lock:!0}}],attrs:{type:"primary"},on:{click:function(t){return e.dataFormSubmit()}}},[e._v("确定")])],1)],1)},o=[],l=a(5970),i={components:{},mixins:[l.Z],props:{},data(){return{visible:!1,fullscreenLoading:!1,clickStatu:!1,statusList:[{value:1,label:this.$t("sys.user.enable")},{value:2,label:this.$t("sys.user.unable")}],dataForm:{id:"",code:"",nameEnUs:"",nameLocal:"",memo:"",value:"",flag:1},dataRule:{code:[{required:!0,message:this.$t("sys.lang.code")+this.$t("info.common.notNull "),trigger:"blur"}],nameEnUs:[{required:!0,message:this.$t("sys.lang.nameEnUs")+this.$t("info.common.notNull "),trigger:"blur"}],nameLocal:[{required:!0,message:this.$t("sys.lang.nameLocal")+this.$t("info.common.notNull "),trigger:"blur"}],value:[{required:!0,message:this.$t("sys.lang.value")+this.$t("info.common.notNull "),trigger:"blur"}]}}},computed:{},created(){},mounted(){},methods:{init(e,t){this.visible=!0,console.log(e),this.$nextTick((()=>{this.$refs.dataForm.resetFields(),e&&(this.dataForm=e||"","copy"===t&&(this.dataForm.id=""))}))},resetDataForm(){this.dataForm={id:"",code:"",nameEnUs:"",nameLocal:"",memo:"",value:"",flag:1}},dataFormSubmit(){this.clickStatu||(this.clickStatu=!0,this.$refs["dataForm"].validate((e=>{if(e){this.fullscreenLoading=!0;let e={};e={id:this.dataForm.id||null,code:this.dataForm.code,nameLocal:this.dataForm.nameLocal,nameEnUs:this.dataForm.nameEnUs,memo:this.dataForm.memo,value:this.dataForm.value,flag:this.dataForm.flag,language:"zh"===this.$store.state.i18n.locale?"zh_CN":"en_us"},this.$http({url:"/service/data/save",method:"post",data:e,contentType:"json"}).then((e=>{e&&0===e.code?(this.refreshUserData("datas"),this.visible=!1,this.$emit("refreshDataList"),this.$message({message:this.$t("operateSuccess"),type:"success",duration:1500,onClose:()=>{this.clickStatu=!1,this.fullscreenLoading=!1}})):this.$message({message:this.$t(e.msg),type:"error",duration:1500,onClose:()=>{this.clickStatu=!1,this.fullscreenLoading=!1}})}))}}))),setTimeout((()=>{this.clickStatu=!1,this.fullscreenLoading=!1}),1500)}},filters:{},watch:{}},n=i,r=a(3736),m=(0,r.Z)(n,s,o,!1,null,"4e1df995",null),u=m.exports}}]);
//# sourceMappingURL=975.9eadb0c2.js.map