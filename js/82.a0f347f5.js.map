{"version":3,"file":"js/82.a0f347f5.js","mappings":"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","sources":["webpack://el-admin-v2/./src/views/modules/sys/user/User-add-or-update.vue","webpack://el-admin-v2/src/views/modules/sys/user/User-add-or-update.vue","webpack://el-admin-v2/./src/views/modules/sys/user/User-add-or-update.vue?88c3","webpack://el-admin-v2/./src/views/modules/sys/user/User-add-or-update.vue?f2b0"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('el-dialog',{attrs:{\"title\":!_vm.dataForm.id ? '新增' : '编辑',\"visible\":_vm.visible},on:{\"update:visible\":function($event){_vm.visible=$event},\"close\":_vm.resetDataForm}},[_c('el-form',{ref:\"dataForm\",attrs:{\"model\":_vm.dataForm,\"rules\":_vm.dataRule,\"label-width\":\"150px\"},nativeOn:{\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\"))return null;return _vm.dataFormSubmit()}}},[_c('el-row',[_c('el-form-item',{attrs:{\"label\":\"账号\",\"prop\":\"account\"}},[_c('el-input',{model:{value:(_vm.dataForm.account),callback:function ($$v) {_vm.$set(_vm.dataForm, \"account\", $$v)},expression:\"dataForm.account\"}})],1)],1),_c('el-row',[_c('el-form-item',{attrs:{\"label\":\"名称\",\"prop\":\"name\"}},[_c('el-input',{model:{value:(_vm.dataForm.name),callback:function ($$v) {_vm.$set(_vm.dataForm, \"name\", $$v)},expression:\"dataForm.name\"}})],1)],1),_c('el-row',[_c('el-form-item',{attrs:{\"label\":\"机构\",\"prop\":\"deptName\"}},[_c('el-select',{attrs:{\"size\":\"mini\"},model:{value:(_vm.dataForm.deptName),callback:function ($$v) {_vm.$set(_vm.dataForm, \"deptName\", $$v)},expression:\"dataForm.deptName\"}},[_c('el-option',{attrs:{\"value\":_vm.dataForm.deptName}},[_c('el-tree',{attrs:{\"data\":_vm.deptList,\"props\":_vm.defaultProps,\"accordion\":\"\"},on:{\"node-click\":_vm.handleNodeClick}})],1)],1)],1)],1),_c('el-row',[_c('el-form-item',{attrs:{\"label\":_vm.$t('角色'),\"prop\":\"userRole\"}},[_c('el-popover',{attrs:{\"placement\":\"bottom\",\"width\":\"400\",\"trigger\":\"click\"}},[_c('el-table',{ref:\"table\",staticClass:\"table\",attrs:{\"data\":_vm.roleList},on:{\"selection-change\":_vm.handleSelectionChange}},[_c('el-table-column',{attrs:{\"type\":\"selection\",\"align\":\"center\",\"width\":\"50\"}}),_c('el-table-column',{attrs:{\"property\":\"roleName\",\"label\":_vm.$t('sys.role.roleName'),\"align\":\"center\"}}),_c('el-table-column',{attrs:{\"property\":\"roleLevel\",\"label\":_vm.$t('sys.role.roleLevel'),\"align\":\"center\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('span',[_vm._v(_vm._s(_vm.getDictName(scope.row.roleLevel)))])]}}])})],1),_c('el-input',{attrs:{\"slot\":\"reference\",\"type\":\"textarea\",\"readonly\":\"\"},slot:\"reference\",model:{value:(_vm.dataForm.userRole),callback:function ($$v) {_vm.$set(_vm.dataForm, \"userRole\", $$v)},expression:\"dataForm.userRole\"}})],1)],1)],1),_c('el-row',[_c('el-form-item',{attrs:{\"label\":\"管理机构\",\"prop\":\"systemDept\"}},[_c('el-select',{attrs:{\"size\":\"mini\"},model:{value:(_vm.dataForm.systemDept),callback:function ($$v) {_vm.$set(_vm.dataForm, \"systemDept\", $$v)},expression:\"dataForm.systemDept\"}},[_c('el-option',{attrs:{\"value\":_vm.dataForm.systemDept}},[_c('el-tree',{ref:\"tree\",attrs:{\"show-checkbox\":\"\",\"data\":_vm.deptList,\"default-expanded-keys\":_vm.ids,\"nodeKey\":\"id\",\"props\":_vm.defaultProps,\"accordion\":\"\"},on:{\"check-change\":_vm.handleNodeChange}})],1)],1)],1)],1),_c('el-row',[_c('el-form-item',{attrs:{\"label\":\"邮箱\",\"prop\":\"email\",\"rules\":_vm.dataForm.sendEmailFlag === '1' ? _vm.dynamicRules.email : []}},[_c('el-input',{model:{value:(_vm.dataForm.email),callback:function ($$v) {_vm.$set(_vm.dataForm, \"email\", $$v)},expression:\"dataForm.email\"}})],1)],1),_c('el-row',[_c('el-form-item',{attrs:{\"label\":\"电话\",\"prop\":\"tel\",\"rules\":_vm.dataForm.sendflag === '1' ? _vm.dynamicRules.tel : []}},[_c('el-input',{model:{value:(_vm.dataForm.tel),callback:function ($$v) {_vm.$set(_vm.dataForm, \"tel\", $$v)},expression:\"dataForm.tel\"}})],1)],1),_c('el-row',[_c('el-form-item',{attrs:{\"label\":\"标志\",\"prop\":\"flag\"}},[_c('el-select',{attrs:{\"size\":\"mini\"},model:{value:(_vm.dataForm.flag),callback:function ($$v) {_vm.$set(_vm.dataForm, \"flag\", $$v)},expression:\"dataForm.flag\"}},_vm._l((_vm.statusList),function(item){return _c('el-option',{key:item.value,attrs:{\"label\":item.name,\"value\":item.value}})}),1)],1)],1)],1),_c('div',{attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.visible = false}}},[_vm._v(\"取消\")]),_c('el-button',{directives:[{name:\"loading\",rawName:\"v-loading.fullscreen.lock\",value:(_vm.fullscreenLoading),expression:\"fullscreenLoading\",modifiers:{\"fullscreen\":true,\"lock\":true}}],attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.dataFormSubmit()}}},[_vm._v(\"确定\")])],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <el-dialog\r\n    :title=\"!dataForm.id ? '新增' : '编辑'\"\r\n    :visible.sync=\"visible\"\r\n    @close=\"resetDataForm\"\r\n  >\r\n    <el-form\r\n      :model=\"dataForm\"\r\n      ref=\"dataForm\"\r\n      @keyup.enter.native=\"dataFormSubmit()\"\r\n      :rules=\"dataRule\"\r\n      label-width=\"150px\"\r\n    >\r\n      <el-row>\r\n        <el-form-item label=\"账号\" prop=\"account\">\r\n          <el-input v-model=\"dataForm.account\"></el-input>\r\n        </el-form-item>\r\n      </el-row>\r\n      <el-row>\r\n        <el-form-item label=\"名称\" prop=\"name\">\r\n          <el-input v-model=\"dataForm.name\"></el-input>\r\n        </el-form-item>\r\n      </el-row>\r\n      <el-row>\r\n        <el-form-item label=\"机构\" prop=\"deptName\">\r\n          <el-select size=\"mini\" v-model=\"dataForm.deptName\">\r\n            <el-option :value=\"dataForm.deptName\">\r\n              <el-tree\r\n                :data=\"deptList\"\r\n                :props=\"defaultProps\"\r\n                accordion\r\n                @node-click=\"handleNodeClick\"\r\n              ></el-tree>\r\n            </el-option>\r\n          </el-select>\r\n        </el-form-item>\r\n      </el-row>\r\n      <el-row>\r\n        <el-form-item :label=\"$t('角色')\" prop=\"userRole\">\r\n          <el-popover placement=\"bottom\" width=\"400\" trigger=\"click\">\r\n            <el-table\r\n              :data=\"roleList\"\r\n              @selection-change=\"handleSelectionChange\"\r\n              ref=\"table\"\r\n              class=\"table\"\r\n            >\r\n              <el-table-column type=\"selection\" align=\"center\" width=\"50\"></el-table-column>\r\n              <el-table-column property=\"roleName\" :label=\"$t('sys.role.roleName')\" align=\"center\"></el-table-column>\r\n              <el-table-column\r\n                property=\"roleLevel\"\r\n                :label=\"$t('sys.role.roleLevel')\"\r\n                align=\"center\"\r\n              >\r\n                <template slot-scope=\"scope\">\r\n                  <span>{{ getDictName(scope.row.roleLevel) }}</span>\r\n                </template>\r\n              </el-table-column>\r\n            </el-table>\r\n            <el-input slot=\"reference\" v-model=\"dataForm.userRole\" type=\"textarea\" readonly></el-input>\r\n          </el-popover>\r\n        </el-form-item>\r\n      </el-row>\r\n      <el-row>\r\n        <el-form-item label=\"管理机构\" prop=\"systemDept\">\r\n          <el-select size=\"mini\" v-model=\"dataForm.systemDept\">\r\n            <el-option :value=\"dataForm.systemDept\">\r\n              <el-tree\r\n                show-checkbox\r\n                :data=\"deptList\"\r\n                :default-expanded-keys=\"ids\"\r\n                nodeKey=\"id\"\r\n                :props=\"defaultProps\"\r\n                accordion\r\n                ref=\"tree\"\r\n                @check-change=\"handleNodeChange\"\r\n              ></el-tree>\r\n            </el-option>\r\n          </el-select>\r\n        </el-form-item>\r\n      </el-row>\r\n      <el-row>\r\n        <el-form-item\r\n          label=\"邮箱\"\r\n          prop=\"email\"\r\n          :rules=\"dataForm.sendEmailFlag === '1' ? dynamicRules.email : []\"\r\n        >\r\n          <el-input v-model=\"dataForm.email\"></el-input>\r\n        </el-form-item>\r\n      </el-row>\r\n      <el-row>\r\n        <el-form-item\r\n          label=\"电话\"\r\n          prop=\"tel\"\r\n          :rules=\"dataForm.sendflag === '1' ? dynamicRules.tel : []\"\r\n        >\r\n          <el-input v-model=\"dataForm.tel\"></el-input>\r\n        </el-form-item>\r\n      </el-row>\r\n      <el-row>\r\n        <el-form-item label=\"标志\" prop=\"flag\">\r\n          <el-select size=\"mini\" v-model=\"dataForm.flag\">\r\n            <el-option\r\n              v-for=\"item in statusList\"\r\n              :key=\"item.value\"\r\n              :label=\"item.name\"\r\n              :value=\"item.value\"\r\n            ></el-option>\r\n          </el-select>\r\n        </el-form-item>\r\n      </el-row>\r\n    </el-form>\r\n    <div slot=\"footer\">\r\n      <el-button @click=\"visible = false\">取消</el-button>\r\n      <el-button\r\n        type=\"primary\"\r\n        @click=\"dataFormSubmit()\"\r\n        v-loading.fullscreen.lock=\"fullscreenLoading\"\r\n      >确定</el-button>\r\n    </div>\r\n  </el-dialog>\r\n</template>\r\n\r\n<script type=\"text/jsx\">\r\nexport default {\r\n  components: {},\r\n  mixins: [],\r\n  props: {},\r\n  data () {\r\n    return {\r\n      visible: false,\r\n      fullscreenLoading: false,\r\n      sendflagList: this.$store.getters['getDictList']('dept.status'),\r\n      sendEmailFlagList: this.$store.getters['getDictList']('dept.status'),\r\n      statusList: this.$store.getters['getDictList']('dept.status'),\r\n      clickStatu: false,\r\n      deptList: [],\r\n      roleList: [],\r\n      ids: [],\r\n      selectedRole: [],\r\n      selectedRoleId: [],\r\n      defaultProps: {\r\n        children: 'children',\r\n        label: 'name'\r\n      },\r\n      dataForm: {\r\n        id: '',\r\n        name: '',\r\n        deptId: '',\r\n        account: '',\r\n        deptName: '',\r\n        systemDept: '',\r\n        userRole: '',\r\n        datas: [],\r\n        roles: [],\r\n        email: '',\r\n        tel: '',\r\n        sendEmailFlag: '1',\r\n        sendflag: '1',\r\n        flag: '1'\r\n      },\r\n      dataRule: {\r\n        account: [\r\n          {\r\n            required: true,\r\n            message: this.$t('sys.role.account') + this.$t('info.common.notNull '),\r\n            trigger: 'blur'\r\n          }\r\n        ],\r\n        name: [\r\n          {\r\n            required: true,\r\n            message: this.$t('sys.role.name') + this.$t('info.common.notNull '),\r\n            trigger: 'blur'\r\n          }\r\n        ],\r\n        deptName: [\r\n          {\r\n            required: true,\r\n            message: this.$t('sys.role.deptName') + this.$t('info.common.notNull '),\r\n            trigger: 'change'\r\n          }\r\n        ]\r\n      },\r\n      dynamicRules: {\r\n        email: [\r\n          {\r\n            required: true,\r\n            message: this.$t('sys.role.emial') + this.$t('info.common.notNull '),\r\n            trigger: 'change'\r\n          }\r\n        ],\r\n        tel: [\r\n          {\r\n            required: true,\r\n            message: this.$t('sys.role.tel') + this.$t('info.common.notNull '),\r\n            trigger: 'change'\r\n          }\r\n        ]\r\n      }\r\n    }\r\n  },\r\n  computed: {},\r\n  created () {\r\n  },\r\n  mounted () {\r\n  },\r\n  methods: {\r\n    init (item, type) {\r\n      this.ids = []\r\n      this.getDept()\r\n      this.getRole()\r\n      this.visible = true\r\n      console.log(item)\r\n      this.$nextTick(() => {\r\n        this.$refs.dataForm.resetFields()\r\n        this.$refs.tree.setCheckedKeys([])\r\n        if (item) {\r\n          this.getUserRoleDatas(item.id)\r\n          this.dataForm = item || ''\r\n          this.dataForm.roles = this.dataForm.userRole.split('，')\r\n          if (type === 'copy') {\r\n            this.dataForm.id = null\r\n          }\r\n        }\r\n      })\r\n    },\r\n    resetDataForm () {\r\n      this.dataForm = {\r\n        id: '',\r\n        name: '',\r\n        deptId: '',\r\n        account: '',\r\n        deptName: '',\r\n        systemDept: '',\r\n        userRole: '',\r\n        datas: [],\r\n        roles: [],\r\n        email: '',\r\n        tel: '',\r\n        sendEmailFlag: '1',\r\n        sendflag: '1',\r\n        flag: '1'\r\n      }\r\n    },\r\n    getDictName (val) {\r\n      return this.$store.getters['getDictName']('user.level', val)\r\n    },\r\n    handleSelectionChange (val) {\r\n      this.selectedRole = val\r\n      this.dataForm.roles = val.map(item => { return item.id })\r\n      let temp = val.map(item => { return item.roleName })\r\n      this.dataForm.userRole = temp.join('，')\r\n    },\r\n    handleNodeClick (val) {\r\n      this.dataForm.deptId = val.id\r\n      this.dataForm.deptName = val.name\r\n    },\r\n    handleNodeChange (val) {\r\n      console.log(val)\r\n      let selectedDept = this.$refs.tree.getCheckedNodes()\r\n      this.dataForm.datas = selectedDept.map(item => {\r\n        return item.id\r\n      })\r\n      let temp = selectedDept.map(item => {\r\n        return item.name\r\n      })\r\n      this.dataForm.systemDept = temp.join('，')\r\n    },\r\n    getUserRoleDatas (userId) {\r\n      let params = {}\r\n      params = {\r\n        userId: userId,\r\n        language: this.$store.state.i18n.locale === 'zh' ? 'zh_CN' : 'en_us'\r\n      }\r\n      this.$http({\r\n        url: '/service/user/list',\r\n        method: 'post',\r\n        data: params,\r\n        contentType: 'json'\r\n      }).then(res => {\r\n        if (res.code === 0) {\r\n          this.nestToSimple(res.data.datas)\r\n          this.dataForm.datas = this.ids\r\n          this.$nextTick(() => {\r\n            this.$refs.tree.setCheckedKeys(this.ids)\r\n          })\r\n        } else {\r\n          this.$message(this.$t(res.msg))\r\n        }\r\n      })\r\n    },\r\n    nestToSimple (data) {\r\n      data.forEach(item => {\r\n        if (item.state) {\r\n          this.ids.push(item.id)\r\n        }\r\n        if (item.children && item.children.length > 0) {\r\n          this.nestToSimple(item.children)\r\n        }\r\n      })\r\n    },\r\n    getDept () {\r\n      let params = {}\r\n      params = {\r\n        language: this.$store.state.i18n.locale === 'zh' ? 'zh_CN' : 'en_us'\r\n      }\r\n      this.$http({\r\n        url: '/service/dept/getDepts',\r\n        method: 'post',\r\n        data: params,\r\n        contentType: 'json'\r\n      }).then(res => {\r\n        if (res.code === 0) {\r\n          this.deptList = res.data\r\n          this.dataForm.systemDept = this.dataForm\r\n        } else {\r\n          this.$message(this.$t(res.msg))\r\n        }\r\n      })\r\n    },\r\n    getRole () {\r\n      let params = {}\r\n      params = {\r\n        language: this.$store.state.i18n.locale === 'zh' ? 'zh_CN' : 'en_us',\r\n        pageSize: '99999',\r\n        pageNo: '1'\r\n      }\r\n      this.$http({\r\n        url: '/service/role/list',\r\n        method: 'post',\r\n        data: params,\r\n        contentType: 'json'\r\n      }).then(res => {\r\n        if (res.code === 0) {\r\n          this.roleList = res.data.result\r\n          for (let i in this.dataForm.roles) {\r\n            for (let j in this.roleList) {\r\n              if (this.dataForm.roles[i].replace(/^\\s*|\\s*$/g, '') === this.roleList[j].roleName) {\r\n                this.$nextTick(() => {\r\n                  this.$refs.table.toggleRowSelection(this.roleList[j], true)\r\n                })\r\n              }\r\n            }\r\n          }\r\n        } else {\r\n          this.$message(this.$t(res.msg))\r\n        }\r\n      })\r\n    },\r\n    getUserRole () {\r\n\r\n    },\r\n    dataFormSubmit () {\r\n      if (!this.clickStatu) {\r\n        this.clickStatu = true\r\n        this.$refs['dataForm'].validate((valid) => {\r\n          if (valid) {\r\n            this.fullscreenLoading = true\r\n            let params = {}\r\n            params = {\r\n              id: this.dataForm.id || null,\r\n              deptId: this.dataForm.deptId,\r\n              datas: this.dataForm.datas,\r\n              roles: this.dataForm.roles,\r\n              name: this.dataForm.name,\r\n              account: this.dataForm.account,\r\n              email: this.dataForm.email,\r\n              tel: this.dataForm.tel,\r\n              sendEmailFlag: this.dataForm.sendEmailFlag,\r\n              sendflag: this.dataForm.sendflag,\r\n              flag: this.dataForm.flag,\r\n              language: this.$store.state.i18n.locale === 'zh' ? 'zh_CN' : 'en_us'\r\n            }\r\n            this.$http({\r\n              url:\r\n                '/service/user/save',\r\n              method: 'post',\r\n              data: params,\r\n              contentType: 'json'\r\n            }).then((res) => {\r\n              if (res && res.code === 0) {\r\n                this.visible = false\r\n                this.$emit('refreshDataList')\r\n                this.$message({\r\n                  message: this.$t('operateSuccess'),\r\n                  type: 'success',\r\n                  duration: 1500,\r\n                  onClose: () => {\r\n                    this.clickStatu = false\r\n                    this.fullscreenLoading = false\r\n                  }\r\n                })\r\n              } else {\r\n                this.$message({\r\n                  message: this.$t(res.msg),\r\n                  type: 'error',\r\n                  duration: 1500,\r\n                  onClose: () => {\r\n                    this.clickStatu = false\r\n                    this.fullscreenLoading = false\r\n                  }\r\n                })\r\n              }\r\n            })\r\n          }\r\n        })\r\n      }\r\n      setTimeout(() => {\r\n        this.clickStatu = false\r\n        this.fullscreenLoading = false\r\n      }, 1500)\r\n    }\r\n  },\r\n  filters: {},\r\n  watch: {}\r\n}\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n// @import '';\r\n.el-scrollbar .el-scrollbar__view .el-select-dropdown__item {\r\n  height: auto;\r\n  background-color: white;\r\n}\r\n.table {\r\n  height: 400px;\r\n}\r\n</style>\r\n","import mod from \"-!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./User-add-or-update.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./User-add-or-update.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./User-add-or-update.vue?vue&type=template&id=abc4ed7e&scoped=true&\"\nimport script from \"./User-add-or-update.vue?vue&type=script&lang=js&\"\nexport * from \"./User-add-or-update.vue?vue&type=script&lang=js&\"\nimport style0 from \"./User-add-or-update.vue?vue&type=style&index=0&id=abc4ed7e&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"abc4ed7e\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","attrs","dataForm","id","visible","on","$event","resetDataForm","ref","dataRule","nativeOn","type","indexOf","_k","keyCode","key","dataFormSubmit","model","value","account","callback","$$v","$set","expression","name","deptName","deptList","defaultProps","handleNodeClick","$t","staticClass","roleList","handleSelectionChange","scopedSlots","_u","fn","scope","_v","_s","getDictName","row","roleLevel","slot","userRole","systemDept","ids","handleNodeChange","sendEmailFlag","dynamicRules","email","sendflag","tel","flag","_l","statusList","item","directives","rawName","fullscreenLoading","modifiers","staticRenderFns","components","mixins","props","data","sendflagList","sendEmailFlagList","clickStatu","selectedRole","selectedRoleId","children","label","deptId","datas","roles","required","message","trigger","computed","created","mounted","methods","init","console","getUserRoleDatas","params","userId","language","url","method","contentType","then","res","nestToSimple","getDept","getRole","pageSize","pageNo","getUserRole","duration","onClose","setTimeout","filters","watch","component"],"sourceRoot":""}