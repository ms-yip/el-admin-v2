"use strict";(self["webpackChunkel_admin_v2"]=self["webpackChunkel_admin_v2"]||[]).push([[715,53,805],{5053:function(t,e,a){a.r(e),a.d(e,{default:function(){return d}});var s=function(){var t=this,e=t._self._c;return e("el-dialog",{attrs:{title:t.dataForm.id?"编辑":"新增",visible:t.visible},on:{"update:visible":function(e){t.visible=e}}},[e("el-form",{ref:"dataForm",attrs:{model:t.dataForm,rules:t.dataRule,"label-width":"150px"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.dataFormSubmit()}}},[e("el-row",[e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:t.$t("name"),prop:"groupName"}},[e("el-input",{attrs:{maxlength:25},model:{value:t.dataForm.groupName,callback:function(e){t.$set(t.dataForm,"groupName",e)},expression:"dataForm.groupName"}})],1)],1),e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:t.$t("term.info.remark"),prop:"memo"}},[e("el-input",{attrs:{maxlength:25},model:{value:t.dataForm.memo,callback:function(e){t.$set(t.dataForm,"memo",e)},expression:"dataForm.memo"}})],1)],1)],1),e("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.tableDatas,"tooltip-effect":"dark"},on:{"selection-change":t.handleSelectionChange}},[e("el-table-column",{attrs:{type:"selection",width:"55"}}),e("el-table-column",{attrs:{prop:"termId",label:t.$t("term.info.termId")}}),e("el-table-column",{attrs:{prop:"dbcpName",label:t.$t("term.info.deptName")}}),e("el-table-column",{attrs:{prop:"typeId",label:t.$t("term.model.typeId")}}),e("el-table-column",{attrs:{prop:"modelId",label:t.$t("term.info.modelId")}}),e("el-table-column",{attrs:{prop:"brandId",label:t.$t("term.info.brandId")}})],1)],1),e("div",{attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.visible=!1}}},[t._v("取消")]),e("el-button",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:t.fullscreenLoading,expression:"fullscreenLoading",modifiers:{fullscreen:!0,lock:!0}}],attrs:{type:"primary"},on:{click:function(e){return t.dataFormSubmit()}}},[t._v("确定")])],1)],1)},i=[],l={components:{},mixins:[],props:{tableData:{type:Array,default:()=>[]},flag:{type:Number}},data(){return{visible:!1,fullscreenLoading:!1,clickStatu:!1,isCashSelect:[],typeIdList:[],terminalBrandList:[],statusList:[],modelIdList:[],layoutTypeList:[],installTypeList:[],disabled:!1,deptList:[],cityAreaList:[],defaultProps:{children:"children",label:"name"},dataForm:{groupName:"",memo:"",termId:"",typeId:"",terminalBrand:"",webName:"",status:"",modelId:"",layoutType:"",dbcpName:"",installType:""},dataRule:{groupName:[{required:!0,message:this.$t("termGroup.name")+this.$t("info.common.notNull "),trigger:"blur"}]},tableDatas:[],multipleSelection:[]}},computed:{},created(){},mounted(){this.isCashSelect=this.$store.getters["getDictList"]("dept.status"),this.typeIdList=this.$store.getters["getDictList"]("dept.status"),this.terminalBrandList=this.$store.getters["getDictList"]("dept.status"),this.statusList=this.$store.getters["getDictList"]("dept.status"),this.modelIdList=this.$store.getters["getDictList"]("dept.status"),this.layoutTypeList=this.$store.getters["getDictList"]("dept.status"),this.installTypeList=this.$store.getters["getDictList"]("dept.status"),this.$nextTick((()=>{this.tableData.forEach((t=>{this.multipleSelection.indexOf(t.id)>=0&&this.$refs.multipleTable.toggleRowSelection(t,!0)}))}))},methods:{handleSelectionChange(t){this.multipleSelection=t},getDeptList(){let t={};t={language:"zh"===this.$store.state.i18n.locale?"zh_CN":"en_us"},this.$http({url:"/service/dept/getDepts",method:"post",data:t,contentType:"json"}).then((t=>{0===t.code?this.deptList=t.data:this.$message(this.$t(t.msg))}))},handleNodeClick(t){this.dataForm.parentId=t.id,this.dataForm.deptLevel=t.deptLevel+1,this.dataForm.dbcpName=t.name},init(t,e){this.getDeptList(),this.visible=!0,this.$nextTick((()=>{this.$refs.dataForm.resetFields(),0!==this.flag&&1!==this.flag||(this.dataForm.flag=this.flag),t&&(this.dataForm=t||"","copy"===e&&(this.dataForm.id=""))}))},dataFormSelect(){console.log(this.dataForm),this.$http({url:"/list/3",method:"post",data:this.dataForm,contentType:"json"}).then((t=>{t&&0===t.code&&t.data.result.forEach((t=>{this.tableDatas.push(t.filter)}))}))},dataFormSubmit(){this.clickStatu||(this.clickStatu=!0,this.$refs["dataForm"].validate((t=>{t&&(this.fullscreenLoading=!0,this.$http({url:"/save",method:"post",data:this.dataForm,contentType:"json"}).then((t=>{t&&0===t.code?(this.visible=!1,this.$emit("refreshDataList"),this.$message({message:this.$t("operateSuccess"),type:"success",duration:1500,onClose:()=>{this.clickStatu=!1,this.fullscreenLoading=!1}})):this.$message({message:this.$t(t.msg),type:"error",duration:1500,onClose:()=>{this.clickStatu=!1,this.fullscreenLoading=!1}})})))}))),setTimeout((()=>{this.clickStatu=!1,this.fullscreenLoading=!1}),1500)}},filters:{},watch:{}},o=l,r=a(3736),n=(0,r.Z)(o,s,i,!1,null,"2cf10923",null),d=n.exports},8805:function(t,e,a){a.r(e),a.d(e,{default:function(){return d}});var s=function(){var t=this,e=t._self._c;return e("el-dialog",{attrs:{visible:t.visible},on:{"update:visible":function(e){t.visible=e}}},[e("el-table",{attrs:{data:t.tableData}},[e("el-table-column",{attrs:{prop:"termId",label:t.$t("termId")}}),e("el-table-column",{attrs:{prop:"deptName",label:t.$t("deptName")}}),e("el-table-column",{attrs:{prop:"typeId",label:t.$t("term.model.typeId")}}),e("el-table-column",{attrs:{prop:"modelId",label:t.$t("modelId")}}),e("el-table-column",{attrs:{id:"brand",prop:"brandId",label:t.$t("brandId")}})],1)],1)},i=[],l={name:"groupInfo",components:{},mixins:[],props:{tableData:{type:Array,default:()=>[]}},data(){return{visible:!1,fullscreenLoading:!1,deptId:""}},created(){},mounted(){this.posLIst=this.$store.getters["getDictName"]("termBrand")},methods:{init(){this.visible=!0}},filters:{},watch:{}},o=l,r=a(3736),n=(0,r.Z)(o,s,i,!1,null,"860e11b4",null),d=n.exports},1715:function(t,e,a){a.r(e),a.d(e,{default:function(){return c}});var s=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"list"}},[e("grid",{ref:"type",attrs:{api:t.api,columns:t.columns,model:t.dataForm,method:"post",requestOption:{contentType:"json"},rowKey:"id",multiSelectedArr:t.dataListSelections},on:{"update:model":function(e){t.dataForm=e},"update:multiSelectedArr":function(e){t.dataListSelections=e},"update:multi-selected-arr":function(e){t.dataListSelections=e}}},[e("div",{attrs:{slot:"form"},slot:"form"},[e("el-form-item",{attrs:{label:t.$t("name")}},[e("el-input",{staticStyle:{width:"140px"},attrs:{size:"mini",placeholder:this.$t("name"),clearable:""},model:{value:t.dataForm.groupName,callback:function(e){t.$set(t.dataForm,"groupName",e)},expression:"dataForm.groupName"}})],1)],1),e("btn-list",{attrs:{slot:"toolbar",data:t.btnList},on:{click:t.action},slot:"toolbar"})],1),t.addOrUpdateVisible?e("add-or-update",{ref:"addOrUpdate",attrs:{flag:t.publicFlag,tableData:t.tableData},on:{refreshDataList:t.refresh}}):t._e(),t.groupInfoVisible?e("group-info",{ref:"groupInfo",attrs:{tableData:t.tableData}}):t._e()],1)},i=[],l=a(5053),o=a(8805),r={name:"groupList",components:{AddOrUpdate:l["default"],GroupInfo:o["default"]},mixins:[],props:{},data(){this.$createElement;return{api:"/list/2",dataForm:{groupName:""},columns:[{type:"selection",width:50},{label:"name",render(t,{row:e}){const a=t("el-button",{attrs:{type:"text",size:"small"},style:"color:#000;",on:{click:()=>this.showGroupInfo(e.groupId)}},[e.groupName]);return a},sortable:!0},{label:"remark",prop:"memo",sortable:!0},{label:"Flag",render(t,{row:e}){const a=t("span",[this.$store.getters["getDictName"]("groupFlag",e.flag)]);return[a]},sortable:!0},{label:"operation",fixed:"right",render(t,{row:e}){const a=t("el-button",{attrs:{type:"text",icon:"icon-ic_bianji"},on:{click:()=>this.edit(e.groupId)}},["编辑"]),s=t("el-button",{attrs:{type:"text",icon:"icon-ic_shanchu"},on:{click:()=>this.del(e.groupId)}},["删除"]);let i=[];return i.push(a),i.push(s),i},sortable:!0}],dataListSelections:[],addOrUpdateVisible:!1,groupInfoVisible:!1,publicFlag:0,tableData:[]}},computed:{btnList(){return this.$store.getters.getPermissionsByCode("management.terminal.Group")}},created(){},mounted(){},methods:{action(t){const e=!(!t||!this[t]);e?this[t]():this.$message("该功能暂未支持,请联系管理员确认配置是否出错！")},showGroupInfo(t){let e={};e.id=t,this.$http({url:"/list/6",method:"post",data:e,contentType:"json"}).then((t=>{this.groupInfoVisible=!0,this.tableData=[],t.data.forEach((t=>{this.tableData.push(JSON.parse(JSON.stringify(t)))})),this.$nextTick((()=>{this.$refs.groupInfo.init()}))}))},add(){this.publicFlag=0,this.addOrUpdateVisible=!0,this.$nextTick((()=>{this.$refs.addOrUpdate.init()}))},addperson(){this.publicFlag=1,this.addOrUpdateVisible=!0,this.$nextTick((()=>{this.$refs.addOrUpdate.init()}))},edit(t){this.addOrUpdateVisible=!0;let e={};this.tableData=[],this.publicFlag=2,this.$refs.type.list.forEach((a=>{a.groupId===t&&(e=JSON.parse(JSON.stringify(a)),this.tableData.push(JSON.parse(JSON.stringify(a.filter))))})),this.$nextTick((()=>{this.$refs.addOrUpdate.init(e)}))},copy(){},del(t){this.$confirm(this.$t("info.common.delete"),{confirmButtonText:this.$t("confirm"),cancelButtonText:this.$t("cancel"),type:"warning"}).then((()=>{let e={};e={groupIds:t},this.$http({url:"/del",method:"post",data:e,contentType:"json"}).then((t=>{t&&0===t.resultCode&&(this.refresh(),this.$message({message:this.$t("info.common.deletesuccess"),type:"success",duration:1500,onClose:()=>{}}))}))})).catch((()=>{this.$message({type:"info",message:this.$t("unselect")})}))},refresh(){this.$refs.type.getDataList()},resetpassword(){},setgroup(){},importUserInfo(){}},filters:{},watch:{btnList:{immediate:!0,handler(t){console.log(t.map((t=>t.code)))}},dataListSelections(t){console.log(t)}}},n=r,d=a(3736),p=(0,d.Z)(n,s,i,!1,null,"5f677f55",null),c=p.exports}}]);
//# sourceMappingURL=715.5442dea3.js.map