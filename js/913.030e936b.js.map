{"version":3,"file":"js/913.030e936b.js","mappings":"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","sources":["webpack://el-admin-v2/src/mixins/refreshUserData.vue","webpack://el-admin-v2/./src/mixins/refreshUserData.vue","webpack://el-admin-v2/./src/mixins/refreshUserData.vue?cbd8","webpack://el-admin-v2/./src/views/modules/sys/role/Role-distribute.vue","webpack://el-admin-v2/src/views/modules/sys/role/Role-distribute.vue","webpack://el-admin-v2/./src/views/modules/sys/role/Role-distribute.vue?2389","webpack://el-admin-v2/./src/views/modules/sys/role/Role-distribute.vue?5cdd"],"sourcesContent":["<script type=\"text/jsx\">\r\n// 刷新用户基础数据方法：包括 国际化languages、菜单menus、权限privileges、字典datas、事件events\r\nexport default {\r\n  methods: {\r\n    refreshUserData (type) {\r\n      this.$http.get('/service/loginData/refreshUserData', {\r\n        params: {\r\n          language: this.$store.state.i18n.locale === 'zh' ? 'zh_CN' : 'en_us',\r\n          refreshDataType: type // languages、menus、privileges、datas、events\r\n        }\r\n      }).then((res) => {\r\n        if (res.code === 0) {\r\n          let routers =[]\r\n          switch (type) {\r\n            case 'events':\r\n              break\r\n            case 'datas':\r\n              // 字典\r\n              this.$store.commit('common/updateDictList', res.data)\r\n              break\r\n            case 'privileges':\r\n              // 按钮权限\r\n              this.$store.commit('common/updatePermissions', res.data)\r\n              break\r\n            case 'menus':\r\n              // 菜单\r\n              this.$router.options.hasAddDynamicMenuRoutes = false\r\n              console.log(this.$router.options.hasAddDynamicMenuRoutes)\r\n              this.$store.commit('common/updateAllMenuList', res.data)\r\n              routers = this.$store.getters['common/menuRoutersList'].map(row => {\r\n                const url = row.urlVue.startsWith('/') ? row.urlVue : `/${row.urlVue}`\r\n                return {\r\n                  path: url,\r\n                  // name: '',\r\n                  meta: {\r\n                    nameEnUs: row.nameEnUs,\r\n                    nameLocal: row.nameLocal\r\n                  },\r\n                  component: null\r\n                }\r\n              })\r\n\r\n              this.$store.commit('common/updateBusiRouters', [...routers])\r\n              break\r\n            case 'languages':\r\n              // 语言\r\n              // this.$store.commit('common/updateLanguages', res.data.languages)\r\n              this.$i18n.mergeLocaleMessage('zh', res.data.languages)\r\n              break\r\n          }\r\n        }\r\n      })\r\n    }\r\n  },\r\n  filters: {},\r\n  watch: {}\r\n}\r\n</script>\r\n","var render, staticRenderFns\nimport script from \"./refreshUserData.vue?vue&type=script&lang=js&\"\nexport * from \"./refreshUserData.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./refreshUserData.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./refreshUserData.vue?vue&type=script&lang=js&\"","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('el-dialog',{attrs:{\"title\":this.$t('window.select'),\"visible\":_vm.visible},on:{\"update:visible\":function($event){_vm.visible=$event}}},[_c('el-tree',{ref:\"tree\",staticClass:\"el-dialog-div\",attrs:{\"data\":_vm.menuList,\"props\":_vm.defaultProps,\"show-checkbox\":\"\",\"auto-expand-parent\":\"\",\"default-expanded-keys\":_vm.ids,\"nodeKey\":\"id\"},on:{\"check-change\":_vm.handleNodeChange}}),_c('div',{attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.visible = false}}},[_vm._v(\"取消\")]),_c('el-button',{directives:[{name:\"loading\",rawName:\"v-loading.fullscreen.lock\",value:(_vm.fullscreenLoading),expression:\"fullscreenLoading\",modifiers:{\"fullscreen\":true,\"lock\":true}}],attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.dataFormSubmit()}}},[_vm._v(\"确定\")])],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <el-dialog :title=\"this.$t('window.select')\" :visible.sync=\"visible\">\r\n    <el-tree\r\n      class=\"el-dialog-div\"\r\n      :data=\"menuList\"\r\n      :props=\"defaultProps\"\r\n      show-checkbox\r\n      auto-expand-parent\r\n      :default-expanded-keys=\"ids\"\r\n      nodeKey=\"id\"\r\n      @check-change=\"handleNodeChange\"\r\n      ref=\"tree\"\r\n    ></el-tree>\r\n    <div slot=\"footer\">\r\n      <el-button @click=\"visible = false\">取消</el-button>\r\n      <el-button\r\n        type=\"primary\"\r\n        @click=\"dataFormSubmit()\"\r\n        v-loading.fullscreen.lock=\"fullscreenLoading\"\r\n      >确定</el-button>\r\n    </div>\r\n  </el-dialog>\r\n</template>\r\n\r\n<script type=\"text/jsx\">\r\nimport refreshUserData from '@/mixins/refreshUserData'\r\nexport default {\r\n  components: {},\r\n  mixins: [refreshUserData],\r\n  props: {},\r\n  data () {\r\n    return {\r\n      visible: false,\r\n      fullscreenLoading: false,\r\n      clickStatu: false,\r\n      parentName: '',\r\n      menuList: [],\r\n      id: '',\r\n      ids: [],\r\n      priviArray: [],\r\n      defaultProps: {\r\n        children: 'children',\r\n        label: 'name'\r\n      }\r\n    }\r\n  },\r\n  computed: {},\r\n  created () {\r\n  },\r\n  mounted () {\r\n  },\r\n  methods: {\r\n    init (id) {\r\n      this.visible = true\r\n      this.id = id\r\n      this.ids = []\r\n      this.priviArray = []\r\n      this.getRolePriviTree(id)\r\n    },\r\n    getRolePriviTree (id) {\r\n      let params = {}\r\n      params = {\r\n        language: this.$store.state.i18n.locale === 'zh' ? 'zh_CN' : 'en_us',\r\n        id: id\r\n      }\r\n      this.$http({\r\n        url:\r\n          '/role',\r\n        method: 'post',\r\n        data: params,\r\n        contentType: 'json'\r\n      }).then((res) => {\r\n        if (res.code === 0) {\r\n          this.menuList = res.data\r\n          this.nestToSimple(this.menuList)\r\n          this.$nextTick(() => {\r\n            this.$refs.tree.setCheckedKeys(this.ids)\r\n          })\r\n        } else {\r\n          this.$message(this.$t(res.msg))\r\n        }\r\n      })\r\n    },\r\n    nestToSimple (data) {\r\n      data.forEach(item => {\r\n        if (item.state === 1) {\r\n          this.ids.push(item.id)\r\n        }\r\n        if (item.children && item.children.length > 0) {\r\n          this.nestToSimple(item.children)\r\n        }\r\n      })\r\n    },\r\n    handleNodeChange () {\r\n      this.$nextTick(() => {\r\n        this.priviArray = this.$refs.tree.getCheckedKeys()\r\n      })\r\n    },\r\n    dataFormSubmit () {\r\n      if (!this.clickStatu) {\r\n        this.clickStatu = true\r\n        this.fullscreenLoading = true\r\n        let params = {}\r\n        params = {\r\n          id: this.id,\r\n          priviArray: this.priviArray,\r\n          language: this.$store.state.i18n.locale === 'zh' ? 'zh_CN' : 'en_us'\r\n        }\r\n        this.$http({\r\n          url:\r\n            '/service/role',\r\n          method: 'post',\r\n          data: params,\r\n          contentType: 'json'\r\n        }).then((res) => {\r\n          console.log(res)\r\n          if (res && res.code === 0) {\r\n            this.refreshUserData('privileges')\r\n            this.visible = false\r\n            this.$emit('refreshDataList')\r\n            this.$message({\r\n              message: this.$t('operateSuccess'),\r\n              type: 'success',\r\n              duration: 1500,\r\n              onClose: () => {\r\n                this.clickStatu = false\r\n                this.fullscreenLoading = false\r\n              }\r\n            })\r\n          } else {\r\n            this.$message({\r\n              message: this.$t(res.msg),\r\n              type: 'error',\r\n              duration: 1500,\r\n              onClose: () => {\r\n                this.clickStatu = false\r\n                this.fullscreenLoading = false\r\n              }\r\n            })\r\n          }\r\n        })\r\n      }\r\n      setTimeout(() => {\r\n        this.clickStatu = false\r\n        this.fullscreenLoading = false\r\n      }, 1500)\r\n    }\r\n  },\r\n  filters: {},\r\n  watch: {}\r\n}\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n// @import '';\r\n.el-scrollbar .el-scrollbar__view .el-select-dropdown__item {\r\n  height: auto;\r\n  background-color: white;\r\n}\r\n.el-dialog-div {\r\n  max-height: 500px;\r\n  overflow: auto;\r\n}\r\n</style>\r\n","import mod from \"-!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Role-distribute.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Role-distribute.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Role-distribute.vue?vue&type=template&id=32670322&scoped=true&\"\nimport script from \"./Role-distribute.vue?vue&type=script&lang=js&\"\nexport * from \"./Role-distribute.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Role-distribute.vue?vue&type=style&index=0&id=32670322&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"32670322\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","staticRenderFns","methods","refreshUserData","params","language","refreshDataType","then","res","console","routers","path","meta","nameEnUs","nameLocal","component","filters","watch","_vm","this","_c","_self","attrs","$t","visible","on","$event","ref","staticClass","menuList","defaultProps","ids","handleNodeChange","slot","_v","directives","name","rawName","value","fullscreenLoading","expression","modifiers","dataFormSubmit","components","mixins","props","data","clickStatu","parentName","id","priviArray","children","label","computed","created","mounted","init","getRolePriviTree","url","method","contentType","nestToSimple","message","type","duration","onClose","setTimeout"],"sourceRoot":""}