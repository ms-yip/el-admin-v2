"use strict";(self["webpackChunkel_admin_v2"]=self["webpackChunkel_admin_v2"]||[]).push([[1],{3001:function(t,e,a){a.r(e),a.d(e,{default:function(){return n}});var s=function(){var t=this,e=t._self._c;return e("el-dialog",{attrs:{title:t.dataForm.id?"编辑":"新增",visible:t.visible},on:{"update:visible":function(e){t.visible=e},close:t.resetDataForm}},[e("el-form",{ref:"dataForm",attrs:{model:t.dataForm,rules:t.dataRule,"label-width":"150px"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.dataFormSubmit()}}},[e("el-row",[e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"名称",prop:"name"}},[e("el-input",{attrs:{maxlength:25},model:{value:t.dataForm.name,callback:function(e){t.$set(t.dataForm,"name",e)},expression:"dataForm.name"}})],1)],1),e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"编码",prop:"code"}},[e("el-input",{attrs:{maxlength:25},model:{value:t.dataForm.code,callback:function(e){t.$set(t.dataForm,"code",e)},expression:"dataForm.code"}})],1)],1)],1),e("el-row",[e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"父级",prop:"parentName"}},[e("el-select",{attrs:{size:"mini",disabled:t.disabled},model:{value:t.parentName,callback:function(e){t.parentName=e},expression:"parentName"}},[e("el-option",{attrs:{value:t.parentName}},[e("el-tree",{attrs:{data:t.deptList,props:t.defaultProps,accordion:""},on:{"node-click":t.handleNodeClick}})],1)],1)],1)],1)],1),e("el-row",[e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"联系人",prop:"contactMan"}},[e("el-input",{attrs:{maxlength:25},model:{value:t.dataForm.contactMan,callback:function(e){t.$set(t.dataForm,"contactMan",e)},expression:"dataForm.contactMan"}})],1)],1),e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"状态",prop:"status"}},[e("el-select",{attrs:{size:"mini"},model:{value:t.dataForm.status,callback:function(e){t.$set(t.dataForm,"status",e)},expression:"dataForm.status"}},t._l(t.statusList,(function(t){return e("el-option",{key:t.value,attrs:{label:t.name,value:t.value}})})),1)],1)],1)],1),e("el-row",[e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"电话",prop:"telephone"}},[e("el-input",{attrs:{maxlength:25},model:{value:t.dataForm.telephone,callback:function(e){t.$set(t.dataForm,"telephone",e)},expression:"dataForm.telephone"}})],1)],1)],1),e("el-row",[e("el-form-item",{attrs:{label:"地址",prop:"address"}},[e("el-input",{attrs:{maxlength:25},model:{value:t.dataForm.address,callback:function(e){t.$set(t.dataForm,"address",e)},expression:"dataForm.address"}})],1)],1),e("el-row",[e("el-form-item",{attrs:{label:"备注",prop:"memo"}},[e("el-input",{attrs:{maxlength:25},model:{value:t.dataForm.memo,callback:function(e){t.$set(t.dataForm,"memo",e)},expression:"dataForm.memo"}})],1)],1)],1),e("div",{attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.visible=!1}}},[t._v("取消")]),e("el-button",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:t.fullscreenLoading,expression:"fullscreenLoading",modifiers:{fullscreen:!0,lock:!0}}],attrs:{type:"primary"},on:{click:function(e){return t.dataFormSubmit()}}},[t._v("确定")])],1)],1)},o=[],d={components:{},mixins:[],props:{},data(){return{visible:!1,fullscreenLoading:!1,clickStatu:!1,disabled:!1,deptList:[],statusList:this.$store.getters["getDictList"]("dept.status"),orgMarkList:this.$store.getters["getDictList"]("dept.status"),cityList:this.$store.getters["getDictList"]("dept.status"),cityAreaList:[],defaultProps:{children:"children",label:"name"},parentName:"",dataForm:{id:"",name:"",unionNo:"",code:"",unionBankno:"",parentId:"",orgLng:"",deptIndex:"",orgLat:"",contactMan:"",status:"",telephone:"",city:"",orgMark:"",cityArea:"",address:"",memo:"",deptId1:"",deptId2:"",deptId3:"",deptId4:"",deptId5:"",deptId6:"",deptLevel:1,deptName1:"",deptName2:"",deptName3:"",deptName4:"",deptName5:"",deptName6:""},dataRule:{name:[{required:!0,message:"",trigger:"blur"}],code:[{required:!0,message:"",trigger:"blur"}]}}},computed:{},created(){},mounted(){},methods:{init(t,e){this.getDeptList(),this.disabled=!1,this.visible=!0,this.$nextTick((()=>{if(this.$refs.dataForm.resetFields(),t){console.log(t),this.disabled=!0,t.city=t.city.padStart(4,"0");let a=t.city;this.cityList.forEach((t=>{if(t.value===a){let e=t.code;e=e.split("."),e=e[e.length-1],this.cityAreaList=this.$store.getters["getDictList"]("dept.status"+e)}})),this.dataForm=t||"";for(let e=6;e>=1;e--)if(t["deptName"+e])return void(this.parentName=t["deptName"+(e-1)]);"copy"===e&&(this.dataForm.id="")}}))},resetDataForm(){this.dataForm={id:"",name:"",unionNo:"",code:"",unionBankno:"",parentId:"",orgLng:"",deptIndex:"",orgLat:"",contactMan:"",status:"",telephone:"",city:"",orgMark:"",cityArea:"",address:"",memo:"",deptId1:"",deptId2:"",deptId3:"",deptId4:"",deptId5:"",deptId6:"",deptLevel:1,deptName1:"",deptName2:"",deptName3:"",deptName4:"",deptName5:"",deptName6:""}},getDeptList(){let t={};t={language:"zh"===this.$store.state.i18n.locale?"zh_CN":"en_us"},this.$http({url:"/service/dept/getDepts",method:"post",data:t,contentType:"json"}).then((t=>{0===t.code?this.deptList=t.data:this.$message(this.$t(t.msg))}))},handleNodeClick(t){this.dataForm.parentId=t.id,this.dataForm.deptLevel=t.deptLevel+1,this.parentName=t.name},changeHandle(t){this.cityList.forEach((e=>{if(e.value===t){let t=e.code;t=t.split("."),t=t[t.length-1],this.cityAreaList=this.$store.getters["getDictList"]("dept.status"+t),this.dataForm.cityArea=this.cityAreaList[0].value}}))},dataFormSubmit(){this.clickStatu||(this.clickStatu=!0,this.$refs["dataForm"].validate((t=>{if(t){this.fullscreenLoading=!0;let t={};t={id:this.dataForm.id||null,parentId:this.dataForm.parentId,name:this.dataForm.name,unionNo:this.dataForm.unionNo,code:this.dataForm.code,unionBankno:this.dataForm.unionBankno,orgLng:this.dataForm.orgLng,deptIndex:this.dataForm.deptIndex,orgLat:this.dataForm.orgLat,contactMan:this.dataForm.contactMan,status:this.dataForm.status||null,telephone:this.dataForm.telephone,city:this.dataForm.city||null,orgMark:this.dataForm.orgMark,cityArea:this.dataForm.cityArea||null,address:this.dataForm.address,memo:this.dataForm.memo,deptLevel:this.dataForm.deptLevel,language:"zh"===this.$store.state.i18n.locale?"zh_CN":"en_us",deptId1:this.dataForm.deptId1||null,deptId2:this.dataForm.deptId2||null,deptId3:this.dataForm.deptId3||null,deptId4:this.dataForm.deptId4||null,deptId5:this.dataForm.deptId5||null,deptId6:this.dataForm.deptId6||null,deptName1:this.dataForm.deptName1||null,deptName2:this.dataForm.deptName2||null,deptName3:this.dataForm.deptName3||null,deptName4:this.dataForm.deptName4||null,deptName5:this.dataForm.deptName5||null,deptName6:this.dataForm.deptName6||null},this.$http({url:"/service/dept/save",method:"post",data:t,contentType:"json"}).then((t=>{console.log(t),t&&0===t.code?(this.visible=!1,this.$emit("refreshDataList"),this.$message({message:this.$t("operateSuccess"),type:"success",duration:1500,onClose:()=>{this.clickStatu=!1,this.fullscreenLoading=!1}})):this.$message({message:this.$t(t.msg),type:"error",duration:1500,onClose:()=>{this.clickStatu=!1,this.fullscreenLoading=!1}})}))}}))),setTimeout((()=>{this.clickStatu=!1,this.fullscreenLoading=!1}),1500)}},filters:{},watch:{}},i=d,r=a(3736),l=(0,r.Z)(i,s,o,!1,null,"0276570e",null),n=l.exports}}]);
//# sourceMappingURL=1.705cf894.js.map