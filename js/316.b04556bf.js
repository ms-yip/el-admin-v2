"use strict";(self["webpackChunkel_admin_v2"]=self["webpackChunkel_admin_v2"]||[]).push([[316,975],{5970:function(e,t,a){a.d(t,{Z:function(){return m}});var s,l,o={methods:{refreshUserData(e){this.$http.get("/service/loginData/refreshUserData",{params:{language:"zh"===this.$store.state.i18n.locale?"zh_CN":"en_us",refreshDataType:e}}).then((t=>{if(0===t.code){let a=[];switch(e){case"events":break;case"datas":this.$store.commit("common/updateDictList",t.data);break;case"privileges":this.$store.commit("common/updatePermissions",t.data);break;case"menus":this.$router.options.hasAddDynamicMenuRoutes=!1,console.log(this.$router.options.hasAddDynamicMenuRoutes),this.$store.commit("common/updateAllMenuList",t.data),a=this.$store.getters["common/menuRoutersList"].map((e=>{const t=e.urlVue.startsWith("/")?e.urlVue:`/${e.urlVue}`;return{path:t,meta:{nameEnUs:e.nameEnUs,nameLocal:e.nameLocal},component:null}})),this.$store.commit("common/updateBusiRouters",[...a]);break;case"languages":this.$i18n.mergeLocaleMessage("zh",t.data.languages);break}}}))}},filters:{},watch:{}},i=o,n=a(3736),r=(0,n.Z)(i,s,l,!1,null,null,null),m=r.exports},4975:function(e,t,a){a.r(t),a.d(t,{default:function(){return d}});var s=function(){var e=this,t=e._self._c;return t("el-dialog",{attrs:{title:e.dataForm.id?"编辑":"新增",visible:e.visible},on:{"update:visible":function(t){e.visible=t},close:e.resetDataForm}},[t("el-form",{ref:"dataForm",attrs:{model:e.dataForm,rules:e.dataRule,"label-width":"150px"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.dataFormSubmit()}}},[t("el-form-item",{attrs:{label:e.$t("编号"),prop:"code"}},[t("el-input",{attrs:{maxlength:25},model:{value:e.dataForm.code,callback:function(t){e.$set(e.dataForm,"code",t)},expression:"dataForm.code"}})],1),t("el-form-item",{attrs:{label:e.$t("中文"),prop:"nameEnUs"}},[t("el-input",{attrs:{maxlength:25},model:{value:e.dataForm.nameEnUs,callback:function(t){e.$set(e.dataForm,"nameEnUs",t)},expression:"dataForm.nameEnUs"}})],1),t("el-form-item",{attrs:{label:e.$t("英文"),prop:"nameLocal"}},[t("el-input",{attrs:{maxlength:25},model:{value:e.dataForm.nameLocal,callback:function(t){e.$set(e.dataForm,"nameLocal",t)},expression:"dataForm.nameLocal"}})],1),t("el-form-item",{attrs:{label:e.$t("数据值"),prop:"value"}},[t("el-input",{attrs:{maxlength:25},model:{value:e.dataForm.value,callback:function(t){e.$set(e.dataForm,"value",t)},expression:"dataForm.value"}})],1),t("el-form-item",{attrs:{label:e.$t("备注"),prop:"memo"}},[t("el-input",{attrs:{maxlength:25},model:{value:e.dataForm.memo,callback:function(t){e.$set(e.dataForm,"memo",t)},expression:"dataForm.memo"}})],1),t("el-form-item",{attrs:{label:e.$t("状态"),prop:"flag"}},[t("el-select",{attrs:{size:"mini"},model:{value:e.dataForm.flag,callback:function(t){e.$set(e.dataForm,"flag",t)},expression:"dataForm.flag"}},e._l(e.statusList,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1),t("div",{attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.visible=!1}}},[e._v("取消")]),t("el-button",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:e.fullscreenLoading,expression:"fullscreenLoading",modifiers:{fullscreen:!0,lock:!0}}],attrs:{type:"primary"},on:{click:function(t){return e.dataFormSubmit()}}},[e._v("确定")])],1)],1)},l=[],o=a(5970),i={components:{},mixins:[o.Z],props:{},data(){return{visible:!1,fullscreenLoading:!1,clickStatu:!1,statusList:[{value:1,label:this.$t("sys.user.enable")},{value:2,label:this.$t("sys.user.unable")}],dataForm:{id:"",code:"",nameEnUs:"",nameLocal:"",memo:"",value:"",flag:1},dataRule:{code:[{required:!0,message:this.$t("sys.lang.code")+this.$t("info.common.notNull "),trigger:"blur"}],nameEnUs:[{required:!0,message:this.$t("sys.lang.nameEnUs")+this.$t("info.common.notNull "),trigger:"blur"}],nameLocal:[{required:!0,message:this.$t("sys.lang.nameLocal")+this.$t("info.common.notNull "),trigger:"blur"}],value:[{required:!0,message:this.$t("sys.lang.value")+this.$t("info.common.notNull "),trigger:"blur"}]}}},computed:{},created(){},mounted(){},methods:{init(e,t){this.visible=!0,console.log(e),this.$nextTick((()=>{this.$refs.dataForm.resetFields(),e&&(this.dataForm=e||"","copy"===t&&(this.dataForm.id=""))}))},resetDataForm(){this.dataForm={id:"",code:"",nameEnUs:"",nameLocal:"",memo:"",value:"",flag:1}},dataFormSubmit(){this.clickStatu||(this.clickStatu=!0,this.$refs["dataForm"].validate((e=>{if(e){this.fullscreenLoading=!0;let e={};e={id:this.dataForm.id||null,code:this.dataForm.code,nameLocal:this.dataForm.nameLocal,nameEnUs:this.dataForm.nameEnUs,memo:this.dataForm.memo,value:this.dataForm.value,flag:this.dataForm.flag,language:"zh"===this.$store.state.i18n.locale?"zh_CN":"en_us"},this.$http({url:"/service/data/save",method:"post",data:e,contentType:"json"}).then((e=>{e&&0===e.code?(this.refreshUserData("datas"),this.visible=!1,this.$emit("refreshDataList"),this.$message({message:this.$t("operateSuccess"),type:"success",duration:1500,onClose:()=>{this.clickStatu=!1,this.fullscreenLoading=!1}})):this.$message({message:this.$t(e.msg),type:"error",duration:1500,onClose:()=>{this.clickStatu=!1,this.fullscreenLoading=!1}})}))}}))),setTimeout((()=>{this.clickStatu=!1,this.fullscreenLoading=!1}),1500)}},filters:{},watch:{}},n=i,r=a(3736),m=(0,r.Z)(n,s,l,!1,null,"4e1df995",null),d=m.exports},9316:function(e,t,a){a.r(t),a.d(t,{default:function(){return d}});var s=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"menuList"}},[t("grid",{ref:"data",attrs:{api:e.api,model:e.dataForm,columns:e.columns,method:"post",requestOption:{contentType:"json"},rowKey:"id",multiSelectedArr:e.multipleSelection,requestCallback:e.requestCallback},on:{"update:multiSelectedArr":function(t){e.multipleSelection=t},"update:multi-selected-arr":function(t){e.multipleSelection=t}}},[t("div",{attrs:{slot:"form"},slot:"form"},[t("el-form-item",{attrs:{label:"编号"}},[t("el-input",{model:{value:e.dataForm.code,callback:function(t){e.$set(e.dataForm,"code",t)},expression:"dataForm.code"}})],1),t("el-form-item",{attrs:{label:"名称"}},[t("el-input",{model:{value:e.dataForm.name,callback:function(t){e.$set(e.dataForm,"name",t)},expression:"dataForm.name"}})],1)],1),t("btn-list",{attrs:{slot:"toolbar",data:e.btnList},on:{click:e.action},slot:"toolbar"})],1),e.addOrUpdateVisible?t("add-or-update",{ref:"addOrUpdate",on:{refreshDataList:e.refresh}}):e._e()],1)},l=[],o=a(4975),i={name:"I18nList",components:{AddOrUpdate:o["default"]},mixins:[],props:{},data(){this.$createElement;return{api:"/service/data/getPage",columns:[{type:"selection",align:"center",width:"50"},{label:"编号",prop:"code",align:"center"},{label:"英文",prop:"nameEnUs",align:"center"},{label:"中文",prop:"nameLocal",align:"center"},{label:"数据值",prop:"value",align:"center"},{label:"备注",prop:"memo",align:"center"},{label:"状态",align:"center",render(e,{row:t}){const a=e("span",[this.$store.getters["getDictName"]("status",t.flag)]);return[a]}}],addOrUpdateVisible:!1,dataForm:{code:"",name:""},multipleSelection:[]}},computed:{btnList(){return this.$store.getters.getPermissionsByCode("management.systemdata")}},created(){},mounted(){},methods:{action(e){const t=!(!e||!this[e]);t?this[e]():this.$message("该功能暂未支持,请联系管理员确认配置是否出错！")},add(){this.addOrUpdateVisible=!0,this.$nextTick((()=>{this.$refs.addOrUpdate.init()}))},edit(){if(0===this.multipleSelection.length)this.$message({message:this.$t("info.common.selectmore"),type:"warning",duration:1500});else if(1===this.multipleSelection.length){this.addOrUpdateVisible=!0;let e={};this.$refs.data.list.forEach((t=>{t.id===this.multipleSelection[0].id&&(e=JSON.parse(JSON.stringify(t)))})),console.log(e),this.$nextTick((()=>{this.$refs.addOrUpdate.init(e)}))}else this.$message({message:this.$t("info.common.selectone"),type:"warning",duration:1500})},exportData(){},refresh(){this.$refs.data.getDataList()},requestCallback(e,t){t&&0===t.code&&(e.list=t.data.result,e.totalCount=t.data.totalCount)},del(e){var t=e?[e]:this.multipleSelection.map((e=>e.id));let a={};a={ids:t,language:"zh"===this.$store.state.i18n.locale?"zh_CN":"en_us"},this.$confirm(this.$t("info.common.delete"),this.$t("提示")).then((()=>{this.$http({url:"/service/data/del",method:"post",data:a,contentType:"json"}).then((e=>{e&&0===e.code?(this.refresh(),this.$message({message:this.$t("info.common.deletesuccess"),type:"success",duration:1500,onClose:()=>{}})):this.$message.error(this.$t(e.msg))}))}))}},filters:{},watch:{}},n=i,r=a(3736),m=(0,r.Z)(n,s,l,!1,null,"198fa7fa",null),d=m.exports}}]);
//# sourceMappingURL=316.b04556bf.js.map