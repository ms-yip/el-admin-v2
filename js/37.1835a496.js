"use strict";(self["webpackChunkel_admin_v2"]=self["webpackChunkel_admin_v2"]||[]).push([[37,5,1,914],{4005:function(e,t,a){a.r(t),a.d(t,{default:function(){return n}});var s=function(){var e=this,t=e._self._c;return t("el-dialog",{attrs:{title:this.$t("window.view"),visible:e.visible},on:{"update:visible":function(t){e.visible=t}}},[t("el-form",{ref:"dataForm",attrs:{model:e.dataForm,"label-width":"150px"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.dataFormSubmit()}}},[t("el-form-item",{attrs:{label:e.$t("原父机构"),prop:"disParentName"}},[t("el-select",{attrs:{size:"mini",disabled:""},model:{value:e.disParentName,callback:function(t){e.disParentName=t},expression:"disParentName"}},[t("el-option",{attrs:{value:e.disParentName}},[t("el-tree",{attrs:{data:e.deptList,props:e.defaultProps}})],1)],1)],1),t("el-form-item",{attrs:{label:e.$t("修改后的父机构"),prop:"parentName"}},[t("el-select",{attrs:{size:"mini"},model:{value:e.parentName,callback:function(t){e.parentName=t},expression:"parentName"}},[t("el-option",{attrs:{value:e.parentName}},[t("el-tree",{attrs:{data:e.deptList,props:e.defaultProps},on:{"node-click":e.handleNodeClick}})],1)],1)],1)],1),t("div",{attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.visible=!1}}},[e._v("取消")]),t("el-button",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:e.fullscreenLoading,expression:"fullscreenLoading",modifiers:{fullscreen:!0,lock:!0}}],attrs:{type:"primary"},on:{click:function(t){return e.dataFormSubmit()}}},[e._v("确定")])],1)],1)},i=[],o={components:{},mixins:[],props:{},data(){return{visible:!1,fullscreenLoading:!1,clickStatu:!1,deptList:[],parentName:"",newParent:"",disParentName:"",defaultProps:{children:"children",label:"name"},dataForm:{id:"",name:"",unionNo:"",code:"",unionBankno:"",parentId:"",orgLng:"",deptIndex:"",orgLat:"",contactMan:"",status:"",telephone:"",city:"",orgMark:"",cityArea:"",address:"",memo:"",weeksetFlag:"",deptId1:"",deptId2:"",deptId3:"",deptId4:"",deptId5:"",deptId6:"",deptLevel:1,deptName1:"",deptName2:"",deptName3:"",deptName4:"",deptName5:"",deptName6:""}}},computed:{},created(){},mounted(){},methods:{init(e){this.getDeptList(),this.visible=!0,this.$nextTick((()=>{if(this.$refs.dataForm.resetFields(),e){console.log(e),this.dataForm=e||"",this.newParent=e.parentId;for(let t=6;t>=1;t--)if(e["deptName"+t])return this.parentName=e["deptName"+(t-1)],void(this.disParentName=e["deptName"+(t-1)])}}))},getDeptList(){let e={};e={language:"zh"===this.$store.state.i18n.locale?"zh_CN":"en_us"},this.$http({url:"/service/dept/getDepts",method:"post",data:e,contentType:"json"}).then((e=>{0===e.code?this.deptList=e.data:this.$message(this.$t(e.msg))}))},handleNodeClick(e){this.parentName=e.name,this.newParent=e.id,this.dataForm.deptLevel=e.deptLevel+1},dataFormSubmit(){if(!this.clickStatu)if(this.newParent===this.dataForm.parentId)this.$message({message:this.$t("父机构未改变"),type:"warning",duration:1500,onClose:()=>{this.clickStatu=!1,this.fullscreenLoading=!1}});else{this.clickStatu=!0,this.fullscreenLoading=!0;let e={};e={id:this.dataForm.id,weeksetFlag:this.dataForm.weeksetFlag,newParent:this.newParent,parentId:this.dataForm.parentId,mx_internal_uid:"",city:this.dataForm.city,orgMark:this.dataForm.orgMark,address:this.dataForm.address,deptLevel:this.dataForm.deptLevel,code:this.dataForm,children:this.dataForm.children,state:this.dataForm.state,holidaysetFlag:this.dataForm.holidaysetFlag,orgLat:this.dataForm.orgLat,unionNo:this.dataForm.unionNo,status:this.dataForm.status,telephone:this.dataForm.telephone,unionBankno:this.dataForm.unionBankno,memo:this.dataForm.memo,flag:this.dataForm.flag,contactMan:this.dataForm.contactMan,name:this.dataForm.name,deptIndex:this.dataForm.deptIndex,orgLng:this.dataForm.orgLng,cityArea:this.dataForm.cityArea,deptId1:this.dataForm.deptId1,deptId2:this.dataForm.deptId2,deptId3:this.dataForm.deptId3,deptId4:this.dataForm.deptId4,deptId5:this.dataForm.deptId5,deptId6:this.dataForm.deptId6,deptName1:this.dataForm.deptName1,deptName2:this.dataForm.deptName2,deptName3:this.dataForm.deptName3,deptName4:this.dataForm.deptName4,deptName5:this.dataForm.deptName5,deptName6:this.dataForm.deptName6,language:"zh"===this.$store.state.i18n.locale?"zh_CN":"en_us"},this.$http({url:"/service/dept/changeParent",method:"post",data:e,contentType:"json"}).then((e=>{console.log(e),e&&0===e.code?(this.visible=!1,this.$emit("refreshDataList"),this.$message({message:this.$t("operateSuccess"),type:"success",duration:1500,onClose:()=>{this.clickStatu=!1,this.fullscreenLoading=!1}})):this.$message({message:this.$t(e.msg),type:"error",duration:1500,onClose:()=>{this.clickStatu=!1,this.fullscreenLoading=!1}})}))}setTimeout((()=>{this.clickStatu=!1,this.fullscreenLoading=!1}),1500)}},filters:{},watch:{}},d=o,l=a(3736),r=(0,l.Z)(d,s,i,!1,null,"2526cb90",null),n=r.exports},3001:function(e,t,a){a.r(t),a.d(t,{default:function(){return n}});var s=function(){var e=this,t=e._self._c;return t("el-dialog",{attrs:{title:e.dataForm.id?"编辑":"新增",visible:e.visible},on:{"update:visible":function(t){e.visible=t},close:e.resetDataForm}},[t("el-form",{ref:"dataForm",attrs:{model:e.dataForm,rules:e.dataRule,"label-width":"150px"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.dataFormSubmit()}}},[t("el-row",[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"名称",prop:"name"}},[t("el-input",{attrs:{maxlength:25},model:{value:e.dataForm.name,callback:function(t){e.$set(e.dataForm,"name",t)},expression:"dataForm.name"}})],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"编码",prop:"code"}},[t("el-input",{attrs:{maxlength:25},model:{value:e.dataForm.code,callback:function(t){e.$set(e.dataForm,"code",t)},expression:"dataForm.code"}})],1)],1)],1),t("el-row",[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"父级",prop:"parentName"}},[t("el-select",{attrs:{size:"mini",disabled:e.disabled},model:{value:e.parentName,callback:function(t){e.parentName=t},expression:"parentName"}},[t("el-option",{attrs:{value:e.parentName}},[t("el-tree",{attrs:{data:e.deptList,props:e.defaultProps,accordion:""},on:{"node-click":e.handleNodeClick}})],1)],1)],1)],1)],1),t("el-row",[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"联系人",prop:"contactMan"}},[t("el-input",{attrs:{maxlength:25},model:{value:e.dataForm.contactMan,callback:function(t){e.$set(e.dataForm,"contactMan",t)},expression:"dataForm.contactMan"}})],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"状态",prop:"status"}},[t("el-select",{attrs:{size:"mini"},model:{value:e.dataForm.status,callback:function(t){e.$set(e.dataForm,"status",t)},expression:"dataForm.status"}},e._l(e.statusList,(function(e){return t("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})})),1)],1)],1)],1),t("el-row",[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"电话",prop:"telephone"}},[t("el-input",{attrs:{maxlength:25},model:{value:e.dataForm.telephone,callback:function(t){e.$set(e.dataForm,"telephone",t)},expression:"dataForm.telephone"}})],1)],1)],1),t("el-row",[t("el-form-item",{attrs:{label:"地址",prop:"address"}},[t("el-input",{attrs:{maxlength:25},model:{value:e.dataForm.address,callback:function(t){e.$set(e.dataForm,"address",t)},expression:"dataForm.address"}})],1)],1),t("el-row",[t("el-form-item",{attrs:{label:"备注",prop:"memo"}},[t("el-input",{attrs:{maxlength:25},model:{value:e.dataForm.memo,callback:function(t){e.$set(e.dataForm,"memo",t)},expression:"dataForm.memo"}})],1)],1)],1),t("div",{attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.visible=!1}}},[e._v("取消")]),t("el-button",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:e.fullscreenLoading,expression:"fullscreenLoading",modifiers:{fullscreen:!0,lock:!0}}],attrs:{type:"primary"},on:{click:function(t){return e.dataFormSubmit()}}},[e._v("确定")])],1)],1)},i=[],o={components:{},mixins:[],props:{},data(){return{visible:!1,fullscreenLoading:!1,clickStatu:!1,disabled:!1,deptList:[],statusList:this.$store.getters["getDictList"]("dept.status"),orgMarkList:this.$store.getters["getDictList"]("dept.status"),cityList:this.$store.getters["getDictList"]("dept.status"),cityAreaList:[],defaultProps:{children:"children",label:"name"},parentName:"",dataForm:{id:"",name:"",unionNo:"",code:"",unionBankno:"",parentId:"",orgLng:"",deptIndex:"",orgLat:"",contactMan:"",status:"",telephone:"",city:"",orgMark:"",cityArea:"",address:"",memo:"",deptId1:"",deptId2:"",deptId3:"",deptId4:"",deptId5:"",deptId6:"",deptLevel:1,deptName1:"",deptName2:"",deptName3:"",deptName4:"",deptName5:"",deptName6:""},dataRule:{name:[{required:!0,message:"",trigger:"blur"}],code:[{required:!0,message:"",trigger:"blur"}]}}},computed:{},created(){},mounted(){},methods:{init(e,t){this.getDeptList(),this.disabled=!1,this.visible=!0,this.$nextTick((()=>{if(this.$refs.dataForm.resetFields(),e){console.log(e),this.disabled=!0,e.city=e.city.padStart(4,"0");let a=e.city;this.cityList.forEach((e=>{if(e.value===a){let t=e.code;t=t.split("."),t=t[t.length-1],this.cityAreaList=this.$store.getters["getDictList"]("dept.status"+t)}})),this.dataForm=e||"";for(let t=6;t>=1;t--)if(e["deptName"+t])return void(this.parentName=e["deptName"+(t-1)]);"copy"===t&&(this.dataForm.id="")}}))},resetDataForm(){this.dataForm={id:"",name:"",unionNo:"",code:"",unionBankno:"",parentId:"",orgLng:"",deptIndex:"",orgLat:"",contactMan:"",status:"",telephone:"",city:"",orgMark:"",cityArea:"",address:"",memo:"",deptId1:"",deptId2:"",deptId3:"",deptId4:"",deptId5:"",deptId6:"",deptLevel:1,deptName1:"",deptName2:"",deptName3:"",deptName4:"",deptName5:"",deptName6:""}},getDeptList(){let e={};e={language:"zh"===this.$store.state.i18n.locale?"zh_CN":"en_us"},this.$http({url:"/service/dept/getDepts",method:"post",data:e,contentType:"json"}).then((e=>{0===e.code?this.deptList=e.data:this.$message(this.$t(e.msg))}))},handleNodeClick(e){this.dataForm.parentId=e.id,this.dataForm.deptLevel=e.deptLevel+1,this.parentName=e.name},changeHandle(e){this.cityList.forEach((t=>{if(t.value===e){let e=t.code;e=e.split("."),e=e[e.length-1],this.cityAreaList=this.$store.getters["getDictList"]("dept.status"+e),this.dataForm.cityArea=this.cityAreaList[0].value}}))},dataFormSubmit(){this.clickStatu||(this.clickStatu=!0,this.$refs["dataForm"].validate((e=>{if(e){this.fullscreenLoading=!0;let e={};e={id:this.dataForm.id||null,parentId:this.dataForm.parentId,name:this.dataForm.name,unionNo:this.dataForm.unionNo,code:this.dataForm.code,unionBankno:this.dataForm.unionBankno,orgLng:this.dataForm.orgLng,deptIndex:this.dataForm.deptIndex,orgLat:this.dataForm.orgLat,contactMan:this.dataForm.contactMan,status:this.dataForm.status||null,telephone:this.dataForm.telephone,city:this.dataForm.city||null,orgMark:this.dataForm.orgMark,cityArea:this.dataForm.cityArea||null,address:this.dataForm.address,memo:this.dataForm.memo,deptLevel:this.dataForm.deptLevel,language:"zh"===this.$store.state.i18n.locale?"zh_CN":"en_us",deptId1:this.dataForm.deptId1||null,deptId2:this.dataForm.deptId2||null,deptId3:this.dataForm.deptId3||null,deptId4:this.dataForm.deptId4||null,deptId5:this.dataForm.deptId5||null,deptId6:this.dataForm.deptId6||null,deptName1:this.dataForm.deptName1||null,deptName2:this.dataForm.deptName2||null,deptName3:this.dataForm.deptName3||null,deptName4:this.dataForm.deptName4||null,deptName5:this.dataForm.deptName5||null,deptName6:this.dataForm.deptName6||null},this.$http({url:"/service/dept/save",method:"post",data:e,contentType:"json"}).then((e=>{console.log(e),e&&0===e.code?(this.visible=!1,this.$emit("refreshDataList"),this.$message({message:this.$t("operateSuccess"),type:"success",duration:1500,onClose:()=>{this.clickStatu=!1,this.fullscreenLoading=!1}})):this.$message({message:this.$t(e.msg),type:"error",duration:1500,onClose:()=>{this.clickStatu=!1,this.fullscreenLoading=!1}})}))}}))),setTimeout((()=>{this.clickStatu=!1,this.fullscreenLoading=!1}),1500)}},filters:{},watch:{}},d=o,l=a(3736),r=(0,l.Z)(d,s,i,!1,null,"0276570e",null),n=r.exports},3037:function(e,t,a){a.r(t),a.d(t,{default:function(){return p}});var s=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"deptList"}},[t("grid",{ref:"dept",attrs:{api:e.api,model:e.dataForm,columns:e.columns,requestOption:{contentType:"json"},method:"post",rowKey:"id","single-select":"",selectedByMouseClick:e.selectedByMouseClick,layout:["form","toolbar","table"],requestCallback:e.requestCallback},on:{"update:selectedByMouseClick":function(t){e.selectedByMouseClick=t},"update:selected-by-mouse-click":function(t){e.selectedByMouseClick=t}}},[t("div",{attrs:{slot:"form"},slot:"form"},[t("el-form-item",{attrs:{label:"编号"}},[t("el-input",{attrs:{placeholder:"编号",clearable:""},model:{value:e.dataForm.code,callback:function(t){e.$set(e.dataForm,"code",t)},expression:"dataForm.code"}})],1),t("el-form-item",{attrs:{label:"名称"}},[t("el-input",{attrs:{placeholder:"名称",clearable:""},model:{value:e.dataForm.name,callback:function(t){e.$set(e.dataForm,"name",t)},expression:"dataForm.name"}})],1),t("el-form-item",{attrs:{label:"联系人"}},[t("el-input",{attrs:{placeholder:"联系人",clearable:""},model:{value:e.dataForm.contactMan,callback:function(t){e.$set(e.dataForm,"contactMan",t)},expression:"dataForm.contactMan"}})],1),t("el-form-item",{attrs:{label:"地址"}},[t("el-input",{attrs:{placeholder:"地址",clearable:""},model:{value:e.dataForm.address,callback:function(t){e.$set(e.dataForm,"address",t)},expression:"dataForm.address"}})],1)],1),t("btn-list",{attrs:{slot:"toolbar",data:e.btnList},on:{click:e.action},slot:"toolbar"})],1),e.addOrUpdateVisible?t("add-or-update",{ref:"addOrUpdate",on:{refreshDataList:e.refresh}}):e._e(),e.weekSetVisiable?t("week-set",{ref:"weekSet",on:{refreshDataList:e.refresh}}):e._e(),e.changeParentVisiable?t("change-parent",{ref:"changeParent",on:{refreshDataList:e.refresh}}):e._e()],1)},i=[],o=a(4005),d=a(3001),l=a(6914),r={name:"deptList",components:{AddOrUpdate:d["default"],WeekSet:l["default"],ChangeParent:o["default"]},mixins:[],props:{},data(){this.$createElement;return{api:"/service/dept/getDepts",columns:[{label:"名称",prop:"name",align:"left",minWidth:"200"},{label:"地址",prop:"address",align:"center",width:"220"},{label:"电话",prop:"telephone",align:"center"},{label:"标志",align:"center",isFilter:!0,render(e,{row:t}){const a=e("span",[this.$store.getters["getDictName"]("dept.orgMark",t.orgMark)]);return[a]}},{label:"状态",align:"center",isFilter:!0,render(e,{row:t}){const a=e("span",[this.$store.getters["getDictName"]("dept.status",t.status)]);return[a]}},{label:"周边环境",prop:"memo",align:"center",isFilter:!0}],addOrUpdateVisible:!1,changeParentVisiable:!1,selectedByMouseClick:null,list:[],weekSetVisiable:!1,dataForm:{code:"",name:"",contactMan:"",address:""}}},computed:{btnList(){return this.$store.getters.getPermissionsByCode("management.hierarchy")}},created(){},mounted(){},methods:{action(e){const t=!(!e||!this[e]);t?this[e]():this.$message("该功能暂未支持,请联系管理员确认配置是否出错！")},add(){this.addOrUpdateVisible=!0,this.$nextTick((()=>{this.$refs.addOrUpdate.init()}))},edit(){if(this.addOrUpdateVisible=!0,this.selectedByMouseClick){let e={};this.list.forEach((t=>{t.id===this.selectedByMouseClick.id&&(e=JSON.parse(JSON.stringify(t)))})),this.$nextTick((()=>{this.$refs.addOrUpdate.init(e)}))}},setWeek(){this.weekSetVisiable=!0,this.selectedByMouseClick&&this.$nextTick((()=>{this.$refs.weekSet.init(this.selectedByMouseClick.id)}))},setHoliday(){},importHoliday(){},changeParent(){if(this.changeParentVisiable=!0,this.selectedByMouseClick){let e={};this.list.forEach((t=>{t.id===this.selectedByMouseClick.id&&(e=JSON.parse(JSON.stringify(t)))})),e.deptLevel>=3?this.$nextTick((()=>{this.$refs.changeParent.init(e)})):this.$message({message:"不允许修改支行以上机构的父机构！",type:"warning",duration:1500})}},exportData(){let e={language:"zh"===this.$store.state.i18n.locale?"zh_CN":"en_us",code:this.dataForm.code,name:this.dataForm.name,contactMan:this.dataForm.contactMan,address:this.dataForm.address,titles:"名称,"+this.$t("sys.dept.deptIndex")+","+this.$t("sys.dept.code")+","+this.$t("sys.dept.contactMan")+","+this.$t("sys.dept.address")+","+this.$t("sys.dept.telephone")+","+this.$t("sys.dept.unionNo")+","+this.$t("sys.dept.unionBankno")+","+this.$t("feelview.longitude")+","+this.$t("feelview.term.info.dimension")+","+this.$t("sys.dept.orgMark")+","+this.$t("sys.dept.status")+","+this.$t("sys.dept.city")+","+this.$t("sys.dept.cityArea")+","+this.$t("sys.dept.holidaySetting")+","+this.$t("sys.dept.memo"),titleFields:"name,deptIndex,code,contactMan,address,telephone,unionNo,unionBankno,orgLng,orgLat,dept.orgMark,status,city,weeksetFlag,holidaysetFlag,memo"};this.$http({url:"/service/dept/exportExcel",method:"post",data:e,contentType:"json"}).then((e=>{if(0===e.code){let t=e.data.fileName,a="fileName="+t;window.location.href="/api/service/excel/download?"+a}}))},nestToSimple(e){e.forEach((e=>{this.list.push(e),e.children&&e.children.length>0&&this.nestToSimple(e.children)}))},handleSelectionChange(e){this.multipleSelection=e},refresh(){this.$refs.dept.getDataList()},requestCallback(e,t){t&&0===t.code&&(e.list=t.data,e.list.forEach((e=>{e.city=e.city.padStart(4,"0")})),this.nestToSimple(e.list))},del(){let e={};e={ids:[this.selectedByMouseClick.id],language:"zh"===this.$store.state.i18n.locale?"zh_CN":"en_us"},this.$confirm(this.$t("info.common.delete"),this.$t("提示")).then((()=>{this.$http({url:"/service/dept/del",method:"post",data:e,contentType:"json"}).then((e=>{e&&0===e.code?(this.refresh(),this.$message({message:this.$t("info.common.deletesuccess"),type:"success",duration:1500,onClose:()=>{}})):this.$message.error(this.$t(e.msg))}))}))}},filters:{},watch:{}},n=r,c=a(3736),m=(0,c.Z)(n,s,i,!1,null,"d7882f70",null),p=m.exports},6914:function(e,t,a){a.r(t),a.d(t,{default:function(){return n}});var s=function(){var e=this,t=e._self._c;return t("el-dialog",{attrs:{title:e.$t("window.setWeek"),visible:e.visible},on:{"update:visible":function(t){e.visible=t}}},[t("el-table",{attrs:{data:e.tableData}},[t("el-table-column",{attrs:{prop:"weekday",label:e.$t("feelview.dept.week"),align:"center"}}),t("el-table-column",{attrs:{prop:"weekFlag",label:e.$t("feelview.dept.isWorkDay"),align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-checkbox",{model:{value:a.row.weekFlag,callback:function(t){e.$set(a.row,"weekFlag",t)},expression:"scope.row.weekFlag"}})]}}])}),t("el-table-column",{attrs:{prop:"weekBegintime",label:e.$t("feelview.dept.startTime"),align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-time-picker",{staticStyle:{width:"120px"},attrs:{format:"HH:mm:ss","value-format":"HH:mm:ss"},model:{value:a.row.weekBegintime,callback:function(t){e.$set(a.row,"weekBegintime",t)},expression:"scope.row.weekBegintime"}})]}}])}),t("el-table-column",{attrs:{prop:"weekEndtime",label:e.$t("feelview.dept.endTime"),align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-time-picker",{staticStyle:{width:"120px"},attrs:{format:"HH:mm:ss","value-format":"HH:mm:ss"},model:{value:a.row.weekEndtime,callback:function(t){e.$set(a.row,"weekEndtime",t)},expression:"scope.row.weekEndtime"}})]}}])})],1),t("div",{attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.visible=!1}}},[e._v("取消")]),t("el-button",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:e.fullscreenLoading,expression:"fullscreenLoading",modifiers:{fullscreen:!0,lock:!0}}],attrs:{type:"primary"},on:{click:function(t){return e.dataFormSubmit()}}},[e._v("确定")])],1)],1)},i=[],o={components:{},mixins:[],props:{},data(){return{visible:!1,clickStatu:!1,fullscreenLoading:!1,deptId:"",id:"",tableData:[],weekday:[]}},computed:{},created(){},mounted(){},methods:{init(e){this.visible=!0,this.deptId=e,this.getWeekSet(),this.weekday=this.$t("common.fullDayNames").split(","),this.weekday.push(this.weekday.shift())},getWeekSet(){let e={};this.tableData=[],e={deptId:this.deptId,language:"zh"===this.$store.state.i18n.locale?"zh_CN":"en_us"},this.$http({url:"/service/dept_weekset/get",method:"post",data:e,contentType:"json"}).then((e=>{if(e&&0===e.code){for(let t=1;t<=7;t++){this.id=e.data.id;let a={};a.weekday=this.weekday[t-1],e.data["weekBegintime"+t]?a.weekBegintime=e.data["weekBegintime"+t]:a.weekBegintime="08:00:00",e.data["weekEndtime"+t]?a.weekEndtime=e.data["weekBegintime"+t]:a.weekEndtime="17:00:00",e.data["weekFlag"+t]?a.weekFlag=Boolean("1"===e.data["weekFlag"+t]):a.weekFlag=Boolean(t<6),this.tableData.push(a)}console.log(this.tableData)}}))},dataFormSubmit(){if(!this.clickStatu){this.clickStatu=!0,this.fullscreenLoading=!0;let e={};e={id:this.id||null,deptId:this.deptId,language:"zh"===this.$store.state.i18n.locale?"zh_CN":"en_us"};for(let t=1;t<=7;t++)e["weekBegintime"+t]=this.tableData[t-1].weekBegintime,e["weekEndtime"+t]=this.tableData[t-1].weekEndtime,e["weekFlag"+t]=this.tableData[t-1].weekFlag?"1":"0";this.$http({url:"/service/dept_weekset/save",method:"post",data:e,contentType:"json"}).then((e=>{e&&0===e.code?(this.visible=!1,this.$emit("refreshDataList"),this.$message({message:this.$t("operateSuccess"),type:"success",duration:1500,onClose:()=>{this.clickStatu=!1,this.fullscreenLoading=!1}})):this.$message({message:this.$t(e.msg),type:"error",duration:1500,onClose:()=>{this.clickStatu=!1,this.fullscreenLoading=!1}})}))}setTimeout((()=>{this.clickStatu=!1,this.fullscreenLoading=!1}),1500)}},filters:{},watch:{}},d=o,l=a(3736),r=(0,l.Z)(d,s,i,!1,null,"58eab569",null),n=r.exports}}]);
//# sourceMappingURL=37.1835a496.js.map