"use strict";(self["webpackChunkel_admin_v2"]=self["webpackChunkel_admin_v2"]||[]).push([[5],{4005:function(t,e,a){a.r(e),a.d(e,{default:function(){return l}});var i=function(){var t=this,e=t._self._c;return e("el-dialog",{attrs:{title:this.$t("window.view"),visible:t.visible},on:{"update:visible":function(e){t.visible=e}}},[e("el-form",{ref:"dataForm",attrs:{model:t.dataForm,"label-width":"150px"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.dataFormSubmit()}}},[e("el-form-item",{attrs:{label:t.$t("原父机构"),prop:"disParentName"}},[e("el-select",{attrs:{size:"mini",disabled:""},model:{value:t.disParentName,callback:function(e){t.disParentName=e},expression:"disParentName"}},[e("el-option",{attrs:{value:t.disParentName}},[e("el-tree",{attrs:{data:t.deptList,props:t.defaultProps}})],1)],1)],1),e("el-form-item",{attrs:{label:t.$t("修改后的父机构"),prop:"parentName"}},[e("el-select",{attrs:{size:"mini"},model:{value:t.parentName,callback:function(e){t.parentName=e},expression:"parentName"}},[e("el-option",{attrs:{value:t.parentName}},[e("el-tree",{attrs:{data:t.deptList,props:t.defaultProps},on:{"node-click":t.handleNodeClick}})],1)],1)],1)],1),e("div",{attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.visible=!1}}},[t._v("取消")]),e("el-button",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:t.fullscreenLoading,expression:"fullscreenLoading",modifiers:{fullscreen:!0,lock:!0}}],attrs:{type:"primary"},on:{click:function(e){return t.dataFormSubmit()}}},[t._v("确定")])],1)],1)},s=[],d={components:{},mixins:[],props:{},data(){return{visible:!1,fullscreenLoading:!1,clickStatu:!1,deptList:[],parentName:"",newParent:"",disParentName:"",defaultProps:{children:"children",label:"name"},dataForm:{id:"",name:"",unionNo:"",code:"",unionBankno:"",parentId:"",orgLng:"",deptIndex:"",orgLat:"",contactMan:"",status:"",telephone:"",city:"",orgMark:"",cityArea:"",address:"",memo:"",weeksetFlag:"",deptId1:"",deptId2:"",deptId3:"",deptId4:"",deptId5:"",deptId6:"",deptLevel:1,deptName1:"",deptName2:"",deptName3:"",deptName4:"",deptName5:"",deptName6:""}}},computed:{},created(){},mounted(){},methods:{init(t){this.getDeptList(),this.visible=!0,this.$nextTick((()=>{if(this.$refs.dataForm.resetFields(),t){console.log(t),this.dataForm=t||"",this.newParent=t.parentId;for(let e=6;e>=1;e--)if(t["deptName"+e])return this.parentName=t["deptName"+(e-1)],void(this.disParentName=t["deptName"+(e-1)])}}))},getDeptList(){let t={};t={language:"zh"===this.$store.state.i18n.locale?"zh_CN":"en_us"},this.$http({url:"/service/dept/getDepts",method:"post",data:t,contentType:"json"}).then((t=>{0===t.code?this.deptList=t.data:this.$message(this.$t(t.msg))}))},handleNodeClick(t){this.parentName=t.name,this.newParent=t.id,this.dataForm.deptLevel=t.deptLevel+1},dataFormSubmit(){if(!this.clickStatu)if(this.newParent===this.dataForm.parentId)this.$message({message:this.$t("父机构未改变"),type:"warning",duration:1500,onClose:()=>{this.clickStatu=!1,this.fullscreenLoading=!1}});else{this.clickStatu=!0,this.fullscreenLoading=!0;let t={};t={id:this.dataForm.id,weeksetFlag:this.dataForm.weeksetFlag,newParent:this.newParent,parentId:this.dataForm.parentId,mx_internal_uid:"",city:this.dataForm.city,orgMark:this.dataForm.orgMark,address:this.dataForm.address,deptLevel:this.dataForm.deptLevel,code:this.dataForm,children:this.dataForm.children,state:this.dataForm.state,holidaysetFlag:this.dataForm.holidaysetFlag,orgLat:this.dataForm.orgLat,unionNo:this.dataForm.unionNo,status:this.dataForm.status,telephone:this.dataForm.telephone,unionBankno:this.dataForm.unionBankno,memo:this.dataForm.memo,flag:this.dataForm.flag,contactMan:this.dataForm.contactMan,name:this.dataForm.name,deptIndex:this.dataForm.deptIndex,orgLng:this.dataForm.orgLng,cityArea:this.dataForm.cityArea,deptId1:this.dataForm.deptId1,deptId2:this.dataForm.deptId2,deptId3:this.dataForm.deptId3,deptId4:this.dataForm.deptId4,deptId5:this.dataForm.deptId5,deptId6:this.dataForm.deptId6,deptName1:this.dataForm.deptName1,deptName2:this.dataForm.deptName2,deptName3:this.dataForm.deptName3,deptName4:this.dataForm.deptName4,deptName5:this.dataForm.deptName5,deptName6:this.dataForm.deptName6,language:"zh"===this.$store.state.i18n.locale?"zh_CN":"en_us"},this.$http({url:"/service/dept/changeParent",method:"post",data:t,contentType:"json"}).then((t=>{console.log(t),t&&0===t.code?(this.visible=!1,this.$emit("refreshDataList"),this.$message({message:this.$t("operateSuccess"),type:"success",duration:1500,onClose:()=>{this.clickStatu=!1,this.fullscreenLoading=!1}})):this.$message({message:this.$t(t.msg),type:"error",duration:1500,onClose:()=>{this.clickStatu=!1,this.fullscreenLoading=!1}})}))}setTimeout((()=>{this.clickStatu=!1,this.fullscreenLoading=!1}),1500)}},filters:{},watch:{}},n=d,r=a(3736),o=(0,r.Z)(n,i,s,!1,null,"2526cb90",null),l=o.exports}}]);
//# sourceMappingURL=5.b093a731.js.map